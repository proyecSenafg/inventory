(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4780],{67281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Xe}});var r=n(809),o=n.n(r),i=n(26265),a=n(92447),l=n(67294),u=n(37244),s=n.n(u),d=n(19291),c=n(99246),f=n(84054),m=n(65455),p=n(36902),v=n(94797),g=n(49644),E=n(90325),S=n(58886),T=n(47565),b=n(96029),O=n(61792),C=n(57332),I="SegmentationChallenger__bundleSelector__3O4Tm",_=n(14834),y=n(65625),h=n(7655),A=n(56746),N=n(82093),P=n(1025),R=n(23996),k=n(2385),U=n(37629),D=n(52253),L=n(41681),w=n(298),M=n(11426),j=n(62482),G=n(34937),V=(0,G.defineContents)("SegmentationChallengerPageContentType",{pageTitle:{id:"pageTitle",type:"string",placeholderContent:"{ type, select,\n        DAY {Pick a plan - your first {trialTerm, plural, =1 {day is} other {# days are}} free.}\n        WEEK {Pick a plan - your first {trialTerm, plural, =1 {week is} other {# weeks are}} free.}\n        MONTH {Pick a plan - your first {trialTerm, plural, =1 {month is} other {# months are}} free.}\n        other {Pick a plan.}\n      }"},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},redirectingText:{id:"redirectingText",type:"string",placeholderContent:"Redirecting..."}});function B(e,t){var n,r,o=(null===e||void 0===e||null===(n=e.promotion)||void 0===n?void 0:n.promotionTerm)||"",i=(null===e||void 0===e||null===(r=e.promotion)||void 0===r?void 0:r.promotionTermValue)||0;return t.format(V.pageTitle,{type:o,trialTerm:i})}var x,q,Z,F=n(40705),H=n(30137),K=n(8703),W=n(44596),Y=n(70721),Q=n(80827),$=n(84248),X="SegmentationTabs__tabsContainer__3gQG0",J=n(54147),z=n(32292);!function(e){e.COM="COM",e.EDU="EDU",e.GOV="GOV"}(x||(x={})),function(e){e.TEAM="TEAM",e.INDIVIDUAL="INDIVIDUAL",e.ENTERPRISE="ENTERPRISE"}(q||(q={})),function(e){e.DEFAULT="DEFAULT",e.PERPETUAL="PERPETUAL",e.TRIAL="TRIAL",e.BASE="BASE",e.PROMOTION="PROMOTION"}(Z||(Z={}));var ee=(0,G.defineContents)("ImageContentType",{publishUrl:{id:"_publishUrl",type:"string"},authorUrl:{id:"_authorUrl",type:"string"}}),te=(0,G.defineContents)("SegmentationTab",{title:{id:"title",type:"string"},defaultIcon:{id:"defaultIcon",type:ee},selectedIcon:{id:"selectedIcon",type:ee},marketSegment:{id:"marketSegment",type:"string"},customerSegment:{id:"customerSegment",type:"string"},offerType:{id:"offerType",type:"string"}}),ne=(0,G.defineContents)("SegmentationTabs",{pickerLabel:{id:"pickerLabel",type:"string",placeholderContent:"Show me plans for:"},segmentations:{id:"segmentations",type:te,isArray:!0,placeholderContent:[{title:"Individuals",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-selected.svg"},customerSegment:q.INDIVIDUAL,marketSegment:x.COM},{title:"Students and teachers",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-selected.svg"},customerSegment:q.INDIVIDUAL,marketSegment:x.EDU},{title:"Business",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-selected.svg"},customerSegment:q.TEAM,marketSegment:x.COM},{title:"Schools and universities",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-selected.svg"},customerSegment:q.TEAM,marketSegment:x.EDU}]}}),re=n(11168),oe=n(71263),ie=n(17182),ae="SegmentationTab__tabContainer__1dnov",le="SegmentationTab__tabIcon__2tUg2",ue="SegmentationTab__tabLabel__1VAlC",se=l.createElement,de=function(e){var t=e.id,n=e.isSelected,r=e.label,o=e.defaultIcon,i=e.selectedIcon;return se("div",{className:ae,"data-testid":"segmentation-tab-item-".concat(t)},function(e,t,n){return se("div",{className:le},e?n:t)}(n,o,i),se("span",{className:ue,"data-testid":"segmentation-tab-label"},r))},ce=n(52007),fe=n(10315),me=l.createElement;function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e,t){var n=e._publishUrl;return me("img",{src:n,role:"presentation",alt:"","aria-labelledby":t})}var ge=(0,fe.n)("segmentationTabs",ne)((function(e){var t=e.onSelect,n=e.segmentations,r=e.selectedTabId,o=(0,J.VB)(J.yr),a=(0,G.useContentEntry)(ne),u=a.get(ne.pickerLabel),s=(0,ce.useTrackEvent)(),d=function(e,t){var n=e.get("segmentations");return Array.isArray(n)&&t.map((function(e){var t=e||{},r=t.id,o=t.customerSegment,i=t.marketSegments,a=t.offerType,l=i||[""],u=(0,z.Z)(l,1)[0],s=n.find((function(e){return e.marketSegment===u&&e.customerSegment===o&&(!e.offerType||e.offerType===a)}))||{},d=s.title,c=void 0===d?"":d,f=s.defaultIcon,m=void 0===f?"":f,p=s.selectedIcon;return{id:r,title:c,defaultIcon:m,selectedIcon:void 0===p?"":p,customerSegment:o,marketSegment:u,offerType:a}}))}(a,(0,l.useMemo)((function(){return n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.offer)}))}),[n])),c=function(e){var n=d.find((function(t){return t.id===e})),o=n.customerSegment,i=n.marketSegment;n.id!==r&&f(o,i),t&&t(e)},f=function(e,t){var n;n=e===k.op.Individual?t===k.ii.Com?D.ps.SEGMENTATION_TAB_INDIVIDUAL:D.ps.SEGMENTATION_TAB_STUDENTS_TEACHERS:t===k.ii.Edu?D.ps.SEGMENTATION_TAB_SCHOOL_UNIVERSITY:D.ps.SEGMENTATION_TAB_TEAM;var r="".concat(n,":").concat(D.ps.SEGMENTATION_TAB_CLICK),o="".concat(n).concat(D.ps.SEGMENTATION_TAB),i=(0,w.W6)(r,o);s(i)};return me("div",{className:X,"data-testid":"segmentation-tabs-container"},o?me(re.cW,{isQuiet:!0,onSelectionChange:c,selectedKey:r,"data-testid":"segmentation-picker","aria-label":"Show me plans for",label:u},d.map((function(e){var t=e||{},n=t.id,r=t.title;return me(oe.ck,{key:n},r)}))):me(ie.mQ,{selectedKey:r,onSelectionChange:c,"data-testid":"segmentation-tabs","aria-label":"Show me plans for"},me(ie.td,null,d.map((function(e){var t=e||{},n=t.id,o=t.title,i=t.defaultIcon,a=t.selectedIcon;return me(oe.ck,{key:n},me(de,{id:n,isSelected:r===n,label:o,defaultIcon:ve(i,o),selectedIcon:ve(a,o)}))})))))})),Ee=n(22246),Se=n(36623),Te=n(15257),be=n(46839),Oe=n(69047),Ce=n(30488),Ie=n(37703),_e=n(43773),ye=n(23424),he=n(61274),Ae=n(62452),Ne=n(93633),Pe=n(96909),Re=n(5764),ke=n(12510),Ue=n(21346),De=n(60718),Le=l.createElement;function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=(0,fe.n)("segmentationChallengerPage",V)((function(){var e,t,n,r=(0,G.useContentEntry)(V),o=(0,Re.R_)(),a=o.goToNextStep,u=o.hasPreviousStep,d=(0,Ae.eR)(Q.N$.EXTERNAL),p=(0,Ae.nV)(),v=(0,Ae.nV)(L.ki.BUSINESS_TRIAL),g=(0,Ie.useDispatch)(),S=(0,ke.useStore)().getState(),T=(0,Ie.useSelector)(m.mT),C=(0,Ie.useSelector)(O.H0),y=(0,Ie.useSelector)(m.n$),x=(0,Ie.useSelector)(O.et).userId,q=(0,Ie.useSelector)(b.vl),Z=s().app,X=Z.PA_CODE,J=Z.OFFER_TYPE,z=Z.ORIGINAL_OFFER_ID,ee=Z.CLIENT_ID,te=Z.SVAR,ne=Z.ITEMS,re=q[X.name],oe=q[J.name],ie=q[ee.name],ae=q[te.name],le=(0,Ie.useSelector)(b.By)===s().app.LAYOUT.values.SLIM,ue=(0,M.Nk)(),se=ue.setBundleSourceOffer,de=ue.setIsBundleOfferSelected,fe=(0,Ie.useSelector)(M.tT),me=(0,Ie.useSelector)(M.x0),pe=(0,Pe.W)(),ve=pe.showApplePay,we=pe.showGooglePay,je=(0,l.useState)(!1),Ge=je[0],Ve=je[1],Be=(0,l.useState)(!1),xe=Be[0],qe=Be[1],Ze=(0,l.useState)(!1),Fe=Ze[0],He=Ze[1],Ke=(0,Ce.useCommerceAppContext)().isInApp,We=(0,Ie.useSelector)(m.dm),Ye=We.teamAdminConsoleUrl,Qe=We.teamCCPlansUrl,$e=We.teamCCEduPlansUrl,Xe=We.teamDocumentPlansUrl,Je=(0,he.d0)(),ze=(0,he.Af)(),et=(0,Ue.z)(),tt=(0,ce.useTrackEvent)(),nt=D.ps.PLAN_PICK_ROUTE,rt=(0,ye.g)([c.R.P_UC_USE_TEST_CAMPAIGNS,c.R.UC_INTENT_DRIVEN_PRODUCT_CONTENT]),ot=rt[c.R.P_UC_USE_TEST_CAMPAIGNS],it=(0,F.nh)(S,rt),at=(0,Ne.a)(f.VQ,{variables:(0,f.tH)(T,re,y,oe,x,ie,ae,Je,ot)}),lt=at.error,ut=at.loading,st=at.data,dt=at.previousData,ct=ut?dt:st,ft=(null===ct||void 0===ct?void 0:ct.segmentationBundleOffers)||[],mt=ft.map((function(e){return e.segmentationOffer}))||[],pt=(0,E.V$)(q,mt),vt=(0,l.useState)(pt),gt=vt[0],Et=vt[1],St=(0,_e.T)(),Tt=ft.reduce((function(e,t){var n,r,o=null===t||void 0===t||null===(n=t.segmentationOffer)||void 0===n?void 0:n.offer,i=null===o||void 0===o||null===(r=o.productArrangement)||void 0===r?void 0:r.family;return(null===o||void 0===o?void 0:o.id)===gt&&o.customerSegment===k.op.Individual&&o.marketSegments.includes(k.ii.Com)&&0===(e=t.bundleOffers.map((function(e){var t=e.offer,n=e.comparedWithSourcePrice;return Me(Me({},t),{},{productArrangement:t.productArrangement,comparedWithSourcePrice:n,targetOfferFamily:i,productName:me,parentAnalytics:null===o||void 0===o?void 0:o.analytics})}))).length?[o]:e}),[]),bt=(0,Ie.useSelector)(b.yq),Ot=Tt.filter((function(e){return e.id===(null===bt||void 0===bt?void 0:bt[0])})).length>0,Ct=Ot&&null!==(e=null===bt||void 0===bt?void 0:bt[0])&&void 0!==e?e:pt,It=(0,l.useState)(Ct),_t=It[0],yt=It[1],ht=q[ne.name]&&Ot?q:Me(Me({},q),{},(0,i.Z)({},ne.name,[{id:pt}])),At=(0,l.useState)(ht),Nt=At[0],Pt=At[1],Rt={offers:Tt,selectedOfferId:_t};(0,l.useEffect)((function(){var e=(null===bt||void 0===bt?void 0:bt[0])||Ct;if(!lt&&!ut&&Rt.offers.length>0&&!fe){var t,n=Rt.offers.find((function(t){return(null===t||void 0===t?void 0:t.id)===e}));se(e,null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName)}}),[Rt.offers.length,bt,fe,Rt.offers,se,lt,ut,Ct]);var kt=(0,l.useRef)({isDefaultSegmentSelected:!0}),Ut=(0,l.useRef)({isDefaultSelected:!0});(0,l.useEffect)((function(){if(gt){if(kt.current.isDefaultSegmentSelected){St(U.P.PAGE_LOAD,{offers:mt,selectedOfferId:gt});var e=(0,Te.SQ)(mt,gt,!0),t=e.offer,n=e.selectedPodEvent,r=e.flowTypeAttributes,o=(0,w.Nf)(t,r,S,D.RC.EVENT_STATE_TYPE,n,nt,ve,we);et(o)}else{St(U.P.SEGMENT_SELECTED,{offers:mt,selectedOfferId:gt});var i=(0,Te.SQ)(mt,gt,!1),a=i.offer,l=i.selectedPodEvent,u=i.flowTypeAttributes,s=(0,w.Nf)(a,u,S,D.RC.EVENT_LINK_TYPE,l,nt);et(s)}kt.current.isDefaultSegmentSelected=!1,Rt.offers.length>0&&xt(_t)}}),[gt]);var Dt=null===Tt||void 0===Tt?void 0:Tt.reduce((function(e,t,n){var r,o=null===t||void 0===t?void 0:t.offerContent,a=null===o||void 0===o?void 0:o.productName,l=n+1;return{content:Me(Me({},e.content),{},(0,i.Z)({},l,o)),productArrangementCodes:Me(Me({},e.productArrangementCodes),{},(0,i.Z)({},l,t.productArrangementCode)),productLogoUrls:Me(Me({},e.productLogoUrls),{},(0,i.Z)({},l,o.productIconUrls)),descriptionVariables:Me(Me({},e.descriptionVariables),{},(r={},(0,i.Z)(r,"product".concat(n+1),a),(0,i.Z)(r,"totalNumberOfBundleOffers",l),r))}}),{}),Lt=(0,G.useContentEntry)(void 0,!0);!function(){if((0,W.$D)(Tt)){var e=Lt.get("bundleContentList"),t=Lt.get("bestValueList");if(t&&e){var n=e.items[0].bestValue,r=t.items[0];n.label=r.label,n.variant=r.variant}}}();var wt=null===Tt||void 0===Tt?void 0:Tt.find((function(e){return(null===e||void 0===e?void 0:e.id)===_t})),Mt=null===wt||void 0===wt?void 0:wt.offerContent,jt=null===wt||void 0===wt||null===(t=wt.productArrangement)||void 0===t?void 0:t.cloud,Gt=$.R[null===wt||void 0===wt?void 0:wt.offerType],Vt=null===wt||void 0===wt?void 0:wt.productArrangementCode,Bt=null===wt||void 0===wt||null===(n=wt.offerContent)||void 0===n?void 0:n.productIconUrls;function xt(e){var t=q[s().app.ITEMS.name],n=Object.assign({},null===t||void 0===t?void 0:t[0]);n&&(n.id=e);var r=Me(Me({},q),{},(0,i.Z)({},s().app.ITEMS.name,[n]));yt(e),Pt(r),function(e){var t=(0,Te.xy)(Rt.offers,e,Ut.current.isDefaultSelected),n=t.offer,r=t.selectedPodEvent,o=t.flowTypeAttributes,i=(0,w.Nf)(n,o,S,Ut.current.isDefaultSelected?D.RC.EVENT_STATE_TYPE:D.RC.EVENT_LINK_TYPE,r,nt,ve,we);et(i),Ut.current.isDefaultSelected=!1}(e)}function qt(e){return mt.find((function(t){return(null===t||void 0===t?void 0:t.offer.id)===e}))}function Zt(){var e;Ft()&&(Nt[z.name]=null===(e=Ht(k.op.Individual,k.ii.Com))||void 0===e?void 0:e.id);de(fe!==_t);var t=(0,w.W6)("".concat(D.ps.PLAN_PICK_ROUTE,":").concat(D.ps.CONTINUE,":").concat(D.ps.CLICK),D.ps.CONTINUE);tt(t),a(function(){var e,t=Me({},Nt),n=null===Rt||void 0===Rt||null===(e=Rt.offers)||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===_t}));return(0,Ee.m)(t,n,ze),t}())}(0,l.useEffect)((function(){xe&&Zt(),qe(!1)}),[xe]);var Ft=function(){var e=Ht(k.op.Individual,k.ii.Com),t=Ht(k.op.Individual,k.ii.Edu);return e&&t&&e.productArrangement.family!==t.productArrangement.family&&t.id===_t},Ht=function(e,t){var n;return null===(n=mt.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};return Le(l.Fragment,null,Fe?Le(H.b,{workflow:C?K.q.TEAM_ADMIN:K.q.BUSINESS_TRIAL}):Le(De.Ru,{showOneColumnOnDesktop:!le},Le(De.uN,null,Le(A.AppErrorBoundary,{logMeta:{componentName:"Bundle",errorLoadingComponent:"StepHeader"}},Le(be.l,{title:B(wt,r)})),Le(ge,{onSelect:function(e){var t,n;Et(e),yt(e),g((0,Se.$C)(e));var r=null!==(t=null===(n=qt(e))||void 0===n?void 0:n.offer)&&void 0!==t?t:{},o=r.customerSegment,i=r.marketSegments,a=r.offerType;o===k.op.Individual&&i.includes(k.ii.Edu)&&(xt(e),qe(!0)),o===k.op.Team&&(Ve(!0),setTimeout((function(){yt(Ct),Et(pt),Ve(!1)}),10),setTimeout((function(){!function(e,t){if(C)Ke()?(He(!0),p((0,j.AK)(Ye))):d(Ye);else if(e===$.R.TRIAL){var n,r,o,i=null===(n=mt.find((function(e){return e.offer.id===pt})))||void 0===n||null===(r=n.offer)||void 0===r||null===(o=r.productArrangement)||void 0===o?void 0:o.family,a=(0,j.dy)(t,T,y,i);Ke()?(He(!0),v(a)):d(a)}else{var l,u,s,c,f=(null===(l=qt(t))||void 0===l?void 0:l.offer)||{};s=(null===f||void 0===f||null===(u=f.productArrangement)||void 0===u?void 0:u.cloud)===R.e.DOCUMENT?Xe:null!==f&&void 0!==f&&null!==(c=f.marketSegments)&&void 0!==c&&c.includes(k.ii.Com)?Qe:$e,Ke()?(He(!0),p((0,j.AK)(s))):d(s)}}(a,e)}),15))},code:re,segmentations:mt,selectedTabId:gt}),Tt.length>0?Le("div",{className:I},!it&&Dt&&Le(N.$G,{bundleDescriptionVariables:Dt.descriptionVariables,locale:y,offerContents:Dt.content,productArrangementCodes:Dt.productArrangementCodes,productLogoUrls:Dt.productLogoUrls}),wt&&Le(Oe.o,{offer:wt}),Le(N.O0,{onSelectionChange:xt,bundleData:Rt,addIntentDrivenProductContent:it})):Ge&&Le(Y.a,{message:r.get(V.redirectingText),showRedirect:!0}),Tt.length>0&&Le(_.s,{ctaLabel:r.get(V.buttonContinue),onCtaClick:Zt,showBackButton:u()})),Le(De.Wh,{showOneColumnOnDesktop:!le},Le(A.AppErrorBoundary,{logMeta:{componentName:"SegmentationChallenger",errorLoadingComponent:"AllPlansInclude"}},Le(h.R,{cloud:jt,offerType:Gt,offerContent:Mt,productArrangementCode:Vt,productLogoUrls:Bt})),Le(A.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"ClarityTerms"}},Le(P.J,{offer:wt,isInOneColumn:!le})))))})),Ge=(0,fe.n)("allFulfillableItemLists",y.AllFulfillableItemListsContentModel)((function(){return null})).queryCollection,Ve=je.queryCollection;Ve.merge(h.R.queryCollection),Ve.merge(N.$G.queryCollection),Ve.merge(Oe.o.queryCollection),Ve.merge(N.sH.queryCollection),Ve.merge(P.J.queryCollection),Ve.merge(ge.queryCollection),Ve.merge(Ge);var Be=n(17327),xe=n(46576),qe=n(59205),Ze=l.createElement;function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=["/pcs/compare"],We=function(){var e=(0,ke.useStore)(),t=(0,ye.g)([c.R.UC_FORCE_SEGMENTATION_CHALLENGER]),n=e.getShouldRenderSegmentationChallenger(t);return(0,xe.Vk)(),Ze(n?je:f.vI,null)},Ye=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,I,_,y,h,A,N,P,R,k,U,D,L,w,M,j,G,V,B,x,q,Z,F;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I=t.apolloClient,_=t.features,y=t.res,h=t.store,A=t.logger,N=h.getState(),P=(0,m.mT)(N),R=(0,m.n$)(N),k=(0,b.vl)(N)[s().app.PA_CODE.name],U=(0,b.vl)(N)[s().app.OFFER_TYPE.name],D=null===(n=(0,O.et)(N))||void 0===n?void 0:n.userId,L=(0,b.vl)(N)[s().app.CLIENT_ID.name],w=(0,b.vl)(N)[s().app.SVAR.name],M=(0,T.j)(N,_.includes(c.R.UC_FLEXIBLE_PROMOTIONS)),null===y||void 0===y||!y.writableEnded){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,S.C)(N,t.logger);case 14:return j=e.sent,(0,d._H)(j,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=18,I.query({query:f.VQ,variables:(0,f.tH)(P,k,R,U,D,L,w,M,_.includes(c.R.P_UC_USE_TEST_CAMPAIGNS)),context:He({},j)});case 18:if(G=e.sent,N=h.getState(),null===G||void 0===G||!G.errors||(o=null===G||void 0===G?void 0:G.errors,(0,p.yC)(o).every((function(e){return Ke.includes(null===e||void 0===e?void 0:e.path)})))){e.next=25;break}if(V={currentRoute:C.Z.SEGMENTATION},!(B=(0,v.S2)(G.errors,I,h,V))){e.next=25;break}return e.abrupt("return",{error:B});case 25:if(null!==(x=null===G||void 0===G||null===(l=G.data)||void 0===l?void 0:l.segmentationBundleOffers)&&void 0!==x&&x.length){e.next=28;break}throw(0,g.n)();case 28:return A.info((0,E.qj)(x),"Segmentation Bundle Offers Response"),q=(0,E.IG)(null===(u=x[0].segmentationOffer)||void 0===u?void 0:u.offer),h.dispatch((0,Se.fC)(q)),Z=x[0].id,F=He(He({},(0,b.vl)(N)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:Z}])),(0,Re.OK)(t,C.Z.SEGMENTATION,{features:_,newQueryParams:F}),e.abrupt("return",{segmentationOfferId:Z});case 35:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}();function Qe(e,t){e.info((0,E.W1)(t),"Segmentation Offers Response")}We.getInitialProps=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,p,v,E,I,_,y,h,A,N,P,R,k,U,D,L,w,M,j,G,V,B,x,q;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_=t.apolloClient,y=t.features,h=t.res,A=t.store,N=t.logger,!A.getShouldRenderSegmentationChallenger((0,i.Z)({},c.R.UC_FORCE_SEGMENTATION_CHALLENGER,null===y||void 0===y?void 0:y.includes(c.R.UC_FORCE_SEGMENTATION_CHALLENGER)))){e.next=4;break}return e.abrupt("return",Ye(t));case 4:return P=A.getState(),R=(0,m.mT)(P),k=(0,m.n$)(P),U=(0,b.vl)(P)[s().app.PA_CODE.name],D=(0,b.vl)(P)[s().app.OFFER_TYPE.name],L=null===(n=(0,O.et)(P))||void 0===n?void 0:n.userId,w=(0,b.vl)(P)[s().app.CLIENT_ID.name],M=(0,b.vl)(P)[s().app.SVAR.name],j=(0,T.j)(P,y.includes(c.R.UC_FLEXIBLE_PROMOTIONS)),e.next=15,(0,S.C)(P,t.logger);case 15:if(G=e.sent,null===h||void 0===h||!h.writableEnded){e.next=18;break}return e.abrupt("return");case 18:return(0,d._H)(G,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=21,_.query({query:f.j_,variables:(0,f.WC)(R,U,k,D,L,w,M,j,null===y||void 0===y?void 0:y.includes(c.R.P_UC_USE_TEST_CAMPAIGNS)),context:He({},G)});case 21:if(V=e.sent,P=A.getState(),null!==(B=null===V||void 0===V||null===(l=V.data)||void 0===l||null===(u=l.segmentationOffers)||void 0===u||null===(p=u.result[0])||void 0===p?void 0:p.offers)&&void 0!==B&&B.length){e.next=26;break}throw(0,g.n)();case 26:return Qe(N,null===V||void 0===V||null===(v=V.data)||void 0===v?void 0:v.segmentationOffers),x=null===(E=B[0])||void 0===E||null===(I=E.offer)||void 0===I?void 0:I.id,q=He(He({},(0,b.vl)(P)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:x}])),(0,Re.OK)(t,C.Z.SEGMENTATION,{features:y,newQueryParams:q}),e.abrupt("return",{segmentationOfferId:x});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var $e=Be.G.queryCollection;$e.merge(je.queryCollection);var Xe=(0,qe.O)($e,C.Z.SEGMENTATION)(We)},17775:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/segmentation",function(){return n(67281)}])}},function(e){e.O(0,[9774,7949,9022,532,6618,809,7946,3433,8710,5898,3487,3377,6188,1721,9332,2734,7642,4106,4173,5839,898,9490,9174,7779,3728,5454,6224,7957,1913,718,9205,78,8236,4054,5583],(function(){return t=17775,e(e.s=t);var t}));var t=e.O();_N_E=t}]);