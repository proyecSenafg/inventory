(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{30137:function(e,t,n){"use strict";n.d(t,{b:function(){return P},t:function(){return ue}});var r=n(67294),o=n(12398),i=n(93101),a=n(69429),u=n(298),c=n(65455),s=n(49313),l=n(34937),f=(0,l.defineContents)("externalworkflowpage",{headerDefault:{id:"headerDefault",type:"string",placeholderContent:"If you've made your purchase, get started now. (PH)"},messageDefault:{id:"messageDefault",type:"string",placeholderContent:"Please complete the purchase in your web browser. If you would like to purchase later, you can cancel now. (PH)"},cancelButtonDefault:{id:"cancelButtonDefault",type:"string",placeholderContent:"Cancel (PH)"},continueButtonDefault:{id:"continueButtonDefault",type:"string",placeholderContent:"Get Started (PH)"},headerChangePlan:{id:"headerChangePlan",type:"string",placeholderContent:"Switch your plan in your Adobe Account. (PH)"},messageChangePlan:{id:"messageChangePlan",type:"string",placeholderContent:"Once you are done, come back here and click Continue to proceed. If you would like to continue later, you can cancel for now. (PH)"},cancelButtonChangePlan:{id:"cancelButtonChangePlan",type:"string",placeholderContent:"Cancel (PH)"},continueButtonChangePlan:{id:"continueButtonChangePlan",type:"string",placeholderContent:"Continue (PH)"}}),p=n(8703),d=n(66537),v=n(52253),m=n(30488),O=n(12510),g=n(52007),y=n(66482),h=n(36015),E=r.createElement,P=(0,y.c)("checkout/external",f.__contentType,f)((function(e){var t=e.workflow,n=(0,l.useContentEntry)(f),y=(0,m.useCommerceAppContext)().emitMessage,P=(0,g.useTrackEvent)();(0,r.useEffect)((function(){var e=(0,u.W6)("".concat(t).concat(v.ps.COMPLETE_PURCHASE_WEB,":").concat(v.ps.MODAL),"".concat(v.ps.COMPLETE_PURCHASE_WEB));P(e)}),[P,t]);var T=function(e){switch(e){case p.q.CHANGE_PLAN:return{header:n.get(f.headerChangePlan),message:n.get(f.messageChangePlan),cancelButton:n.get(f.cancelButtonChangePlan),continueButton:n.get(f.continueButtonChangePlan)};default:return{header:n.get(f.headerDefault),message:n.get(f.messageDefault),cancelButton:n.get(f.cancelButtonDefault),continueButton:n.get(f.continueButtonDefault)}}}(t),b=T.header,S=T.message,I=T.cancelButton,C=T.continueButton,_=(0,O.useStore)(),A=(0,c.jz)(_.getState());return E("div",{className:a.Z.container},!A&&E("div",{className:a.Z.closeContainer},E(o.default,{variant:"action",quiet:!0,onClick:function(){y(m.SystemMessage.CLOSE)},icon:E(i.default,{size:"L"}),"data-testid":"closeButton"})),E("div",{className:a.Z.center},E(d.InfoLight,{size:"L","data-testid":"externalWorkflowIcon"}),E(s.X6,null,b),E("p",{className:a.Z.message},S),E("div",{className:a.Z.buttonContainer},E(o.default,{variant:"secondary","data-testid":"externalWorkflowCancelButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(v.ps.COMPLETE_PURCHASE_WEB,":").concat(v.ps.CANCEL),"".concat(v.ps.COMPLETE_PURCHASE_WEB).concat(v.ps.CANCEL));P(e),y(m.SystemMessage.CLOSE)}},I),E(o.default,{variant:"cta","data-testid":"externalWorkflowContinueButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(v.ps.COMPLETE_PURCHASE_WEB,":").concat(v.ps.GET_STARTED),"".concat(v.ps.COMPLETE_PURCHASE_WEB).concat(v.ps.GET_STARTED));P(e),y(m.SystemMessage.CLOSE,{shouldTriggerLicenseCheck:!0,status:h.WorkflowStatus.ORDER_COMPLETE})}},C))))})),T=n(26075),b=n(45800),S=n(27261),I=n(76410);function C(){var e=(0,S.Z)(["\n  query UserSubscriptionChangePlanQuery($offerId: ID!, $subscriptionId: ID!) {\n    user {\n      id\n      userSubscription(subscriptionId: $subscriptionId) {\n        id\n        changePlanAllowed(offerId: $offerId)\n      }\n    }\n  }\n"]);return C=function(){return e},e}function _(){var e=(0,S.Z)(["\n  fragment IneligiblePurchaseOrderFragment on Order {\n    marketSegment\n    country\n    cart {\n      cartItems {\n        offerId\n        conflicts {\n          offerId\n          reasonCode\n          subscriptionId\n        }\n      }\n    }\n  }\n"]);return _=function(){return e},e}function A(){var e=(0,S.Z)(["\n  query getOfferForIneligiblePurchaseQuery($offerId: ID!, $country: String!) {\n    offer(id: $offerId, country: $country) {\n      ...IneligiblePurchaseOfferFragment\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function w(){var e=(0,S.Z)(["\n  fragment IneligiblePurchaseOfferFragment on Offer {\n    id\n    commitment\n    term\n    productArrangement {\n      cloud\n      family\n    }\n    offerContent {\n      productName\n      productIconUrls\n    }\n  }\n"]);return w=function(){return e},e}var D=(0,I.Ps)(w()),R=(0,I.Ps)(A(),D),j=(0,I.Ps)(_()),k=(0,I.Ps)(C()),x=function(e,t,n){return e.query({query:R,variables:{offerId:t,country:n}}).then((function(e){return e.data.offer}))},U=n(62482),N=n(36623),Z=n(26265),L=n(809),M=n.n(L),F=n(92447),q=n(38347),B=n(91229),H=n(85564),W=n.n(H),V=n(37244),G=n.n(V),z=n(7585),X=n(61792),$=n(73728),K=n(61274),Y=n(62452),Q=n(85475),J=r.createElement,ee=function(e){return J(z.a,null,(function(t){return J(te,(0,B.Z)({client:t},e))}))},te=function(e){var t,n=e.client,o=e.openUrl,i=e.onFooterClicked,a=(0,q.Z)(e,["client","openUrl","onFooterClicked"]),u=(0,Q.w)(),s=(0,r.useContext)(O.StoreContext),l=(0,O.useStore)(),f=s.getState(),p=(0,c.n$)(f),d=(0,O.useSelector)(N.NO),v=(0,X.hP)(f),m=(0,X.et)(f),g=null===m||void 0===m?void 0:m.userId,y=(0,K.d0)(),h=(0,Y.tD)(),E=h.redirect,P=h.cancelUrl,T=null!==o&&void 0!==o?o:E,S=(0,Y.Sd)(),I=n.readFragment({fragment:j,id:"Order:".concat(d),fragmentName:"IneligiblePurchaseOrderFragment"}),C=(0,r.useCallback)(function(){var e=(0,F.Z)(M().mark((function e(t,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(n,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),_=(0,r.useCallback)((function(e,t){return function(e,t,n,r){return e.query({query:k,variables:{offerId:t,subscriptionId:n},context:r,fetchPolicy:"network-only"}).then((function(e){var t=(e.data.user||{}).userSubscription;return null===t||void 0===t?void 0:t.changePlanAllowed})).catch((function(){return!1}))}(n,e,t,v?{headers:{authorization:v}}:{})}),[n,v]),A=(0,r.useCallback)(function(){var e=(0,F.Z)(M().mark((function e(t){var r,o;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.FG)(n,t,g,p);case 2:return r=e.sent,o=r.data,e.abrupt("return",{data:o});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,p,g]),w=(0,r.useCallback)(function(){var e=(0,F.Z)(M().mark((function e(t){var n,r,o,i,a,c;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.info("Checking whether user is eligible for I2T upgrade in case of duplicate purchase"),e.next=3,A(t);case 3:if(a=e.sent,c=a.data,!((null===c||void 0===c||null===(n=c.individualToTeamUpgradeOffers)||void 0===n||null===(r=n.activeOffersResult)||void 0===r?void 0:r.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.includes("ACTIVE_SUBSCRIPTION_I2T_UPGRADEABLE")}))).length>0&&(null===c||void 0===c||null===(o=c.individualToTeamUpgradeOffers)||void 0===o||null===(i=o.upgradeOffersResult)||void 0===i?void 0:i.offers.length)>0)){e.next=9;break}return u.info("Eligible for i2t upgrade as part of duplicate purchase from A.com"),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[A,u]),D=function(e,t,n){var r,o=null===e||void 0===e||null===(r=e.productArrangement)||void 0===r?void 0:r.family,i=n.find((function(e){return(null===e||void 0===e?void 0:e.paFamily)===o}));return t.includes(null===i||void 0===i?void 0:i.id)},R=(0,r.useCallback)(function(){var e=(0,F.Z)(M().mark((function e(t){var n,r,o,i,a,c,s,l,f,d,v,m,O,g,y,h,E;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:f=e.sent,d=f.data,v=null===d||void 0===d||null===(n=d.individualToTeamUpgradeOffers)||void 0===n?void 0:n.activeSubscriptions,m=null===d||void 0===d||null===(r=d.individualToTeamUpgradeOffers)||void 0===r||null===(o=r.activeOffersResult)||void 0===o?void 0:o.map((function(e){return{id:null===e||void 0===e?void 0:e.offer.id,paFamily:null===e||void 0===e?void 0:e.offer.productArrangement.family}})),O=null===d||void 0===d||null===(i=d.individualToTeamUpgradeOffers)||void 0===i||null===(a=i.upgradeOffersResult)||void 0===a?void 0:a.offers,g=null===I||void 0===I||null===(c=I.cart)||void 0===c||null===(s=c.cartItems)||void 0===s?void 0:s.map((function(e){var t;return null===e||void 0===e||null===(t=e.conflicts)||void 0===t?void 0:t.map((function(e){return e.offerId}))})),y=W()(g),h=null===O||void 0===O?void 0:O.map((function(e,t){var n=e.offer;if(t<v.length)return{id:n.id,q:D(n,y,m)?2:1}})).filter((function(e){return void 0!==e})),l={},(0,Z.Z)(l,G().app.COUNTRY.name,t),(0,Z.Z)(l,G().app.LANGUAGE.name,p),(0,Z.Z)(l,G().app.CURRENT_SUBSCRIPTION_IDS.name,v),(0,Z.Z)(l,G().app.ITEMS.name,h),E=l,u.info("Redirecting to i2t payment page as part of duplicate purchase from A.com"),S(E);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[A,S,p,I,u]),U=$.j$.IN_WEB,L=null===(t=l.getPersonalizedContentVariationByAEMQueryName)||void 0===t?void 0:t.call(l,"ineligible-purchase-dialogs-list"),H=L?Object.fromEntries(L.split(";").map((function(e){return e.split("=")}))):void 0;return J($.jO,(0,B.Z)({fetchOffer:C,fetchUserSubscriptionChangeOfferAllowed:_,fetchIndividualToTeamUpgradeAllowed:w,upgradeIndividualToTeam:R,locale:"zh-hant"===p?"zh_TW":p,switchPlanSurface:U,order:I,openUrl:T,onFooterClicked:i,cancelUrl:P,promoCode:null===y||void 0===y?void 0:y[0],variation:H},a))},ne=n(56),re=n(37703),oe=r.createElement;function ie(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t=e.children,n=(0,T.x)(),o=(0,ne.TZ)(),i=(0,m.useCommerceAppContext)().isInApp,a=(0,Y.nV)(),u=(0,r.useState)(!1),c=u[0],s=u[1],l=(0,r.useState)(void 0),f=l[0],d=l[1],v=(0,re.useSelector)(N.NO),O=(0,r.useCallback)((function(){var e,t,r=n.readFragment({fragment:j,id:"Order:".concat(v),fragmentName:"IneligiblePurchaseOrderFragment"}),o=ie(null===r||void 0===r||null===(e=r.cart)||void 0===e?void 0:e.cartItems);try{for(o.s();!(t=o.n()).done;){var i,a=ie(t.value.conflicts);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(u.reasonCode)return u.reasonCode}}catch(c){a.e(c)}finally{a.f()}}}catch(c){o.e(c)}finally{o.f()}}),[v,n]);function g(e){switch(e){case b.rg.IneligibleSwitch:case b.rg.IneligibleIncluded:case b.rg.IneligibleDuplicateUpgrade:d(p.q.CHANGE_PLAN);break;default:d(void 0)}}return oe(r.Fragment,null,oe(ee,{openUrl:i()?function(e){g(O()),s(!0);var t=(0,U.AK)(e);a(t)}:void 0,onFooterClicked:i()?function(){g(void 0),s(!0)}:void 0,adobeLaunchAnalytics:o}),c?oe(P,{workflow:f}):t)}},47758:function(e,t,n){"use strict";n.d(t,{h:function(){return a},N:function(){return u}});var r,o=n(19291),i=n(67294);function a(e){var t=e||r||[];return(0,o.Lf)()&&!r&&(r=t),t}function u(e){return(0,i.useMemo)((function(){return a(e)}),[e])}},68370:function(e,t,n){"use strict";n.d(t,{Lh:function(){return a},GP:function(){return u}});var r=n(13311),o=n.n(r),i=n(2385);function a(e,t){var n=[];return t.forEach((function(t){var r=e("offers",t).find((function(n){var r=e("offer",n),o=e("sourceOffer",t);return r.term===(null===o||void 0===o?void 0:o.term)&&r.commitment===(null===o||void 0===o?void 0:o.commitment)}));if(r){var o=e("offer",r);n.push(o.id)}})),n}function u(e){var t=[],n=[];return e.forEach((function(e){var r=function(e){var t=e.commitment,n=e.term,r=e.pricePoint,o=e.language;return t===i.y3.Perpetual?{commitment:t,pricePoint:r,language:o}:{commitment:t,term:n,pricePoint:r,language:o}}(e.offer);o()(t,r)&&!o()(n,r)?n.push(r):t.push(r)})),n}},31549:function(e,t,n){"use strict";n.d(t,{l:function(){return p},q:function(){return d}});var r=n(27261),o=n(30480),i=n(76410);function a(){var e=(0,r.Z)(["\n  fragment CommitmentVariantsOffers on CommitmentVariantsOffersResult {\n    resolvedSourceOfferIds @client\n    result {\n      sourceOfferId\n      sourceOffer {\n        id\n        commitment\n        currency {\n          code\n          delimiterValue\n          formatString\n          precision\n          symbol\n        }\n        customerSegment\n        marketSegments\n        offerType\n        pricePoint\n        productArrangementCode\n        term\n      }\n      offers {\n        offer {\n          id\n          analytics {\n            actionBlockId\n            campaignId\n            containerId\n            controlGroupId\n            treatmentId\n            variationId\n          }\n          appliedPromotions {\n            ...AppliedPromotionFields\n            tncText(locale: $locale)\n            content(locale: $locale) {\n              tncText\n            }\n          }\n          cancellationTerm {\n            termRule {\n              etfPeriod\n              etfUnit\n            }\n          }\n          commitment\n          computedPrice {\n            perMonthWithTax\n            perMonthWithoutTax\n            perYearWithTax\n            perYearWithoutTax\n          }\n          currency {\n            code\n            delimiterValue\n            formatString\n            precision\n            symbol\n          }\n          customerSegment\n          marketSegments\n          marketSegmentAltPrice(\n            input: $offersInput\n            marketSegment: $segmentInput\n          ) {\n            offerPrice {\n              unitPriceWithoutTax\n              unitPriceWithTax\n              discountedUnitPriceWithoutTax\n              discountedUnitPriceWithTax\n              percentDiscount\n            }\n            percentDiscount {\n              percentDiscountWithTax\n              percentDiscountWithoutTax\n            }\n          }\n          materialId\n          offerContent {\n            backgroundImageUrl\n            gettingStartedTemplateUrl\n            fulfillableItems {\n              code\n              description\n              displayCategory\n              iconUrl\n              name\n            }\n            productDescription {\n              plainText\n              json\n            }\n            marketingValues\n            productIconUrl\n            productIconUrls\n            productName\n          }\n          offerPrice {\n            unitPriceWithTax\n            unitPriceWithoutTax\n            discountedUnitPriceWithTax\n            discountedUnitPriceWithoutTax\n            percentDiscount\n          }\n          offerPriceDisplay {\n            displayBaseUnitPrice\n            displayUnitPrice\n            priceDisplay\n            showTaxDisclaimer\n            taxTerm\n          }\n          offerType\n          pricePoint\n          processingInstructions {\n            trial {\n              trialReminderEnabled\n              trialReminderDays\n            }\n            checkout {\n              productArrangementPrimaryType\n            }\n          }\n          productArrangement {\n            cloud\n            code\n            family\n          }\n          productArrangementCode\n          promotion {\n            promotionTerm\n            promotionTermEndDate\n            promotionTermValue\n            promotionType\n          }\n          tags\n          term\n          tncCode\n        }\n        sourceIntent\n      }\n    }\n    sourceIntent\n  }\n  ","\n"]);return a=function(){return e},e}var u=(0,i.Ps)(a(),o.Q),c=n(2385),s=n(90376),l=n(59180);function f(){var e=(0,r.Z)(["\n  query GET_COMMITMENT_VARIANTS_OFFERS(\n    $offersInput: PersonalizedOffersInput!\n    $segmentInput: String!\n    $locale: String!\n  ) {\n    commitmentVariantsOffers(input: $offersInput) {\n      ...CommitmentVariantsOffers\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p=(0,i.Ps)(f(),u);function d(e){var t=e.country,n=e.locale,r=e.offerIds,o=e.userId,i=e.clientId,a=e.svar,u=e.promotionCodes,f=e.useTestCampaign;return{offersInput:{clientId:i,country:t,locale:n,sourceOfferIds:r,sourceIntent:void 0!==f&&f?l.ph.COMMITMENT_VARIANTS:void 0,svar:a,userId:o,processingInstructions:[s.c.CHECKOUT,s.c.TRIAL],promotionCodes:u},segmentInput:c.ii.Com,locale:n}}},24129:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var r={ADOBE_ACCESS_TOKEN:"adobeAccessToken",ADOBE_USER_PROFILE:"adobeUserProfile",ADOBE_AUTH_SOURCE:"adobeAuthSource",APP_FEATURES:"features",CLIENT_SESSION_ID:"clientSessionId"}},46576:function(e,t,n){"use strict";n.d(t,{mw:function(){return g},Vk:function(){return P}});var r=n(809),o=n.n(r),i=n(92447),a=n(27261),u=n(76410),c=n(26075),s=n(36623),l=n(61792),f=n(65455),p=n(62452),d=n(37703),v=n(67294),m=n(12510);function O(){var e=(0,a.Z)(["\n  query GET_COUNTRY_CHANGE_ALLOWED {\n    user {\n      id\n      countryChangeAllowed\n    }\n  }\n"]);return O=function(){return e},e}var g="GET_COUNTRY_CHANGE_ALLOWED",y=(0,u.Ps)(O());function h(e,t){return E.apply(this,arguments)}function E(){return(E=(0,i.Z)(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,e.prev=1,!n){e.next=7;break}return e.next=5,t.query({query:y,context:{headers:{Authorization:"Bearer ".concat(n)}},fetchPolicy:"no-cache"});case 5:i=e.sent,r=i.data.user.countryChangeAllowed;case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var P=function(){var e=(0,d.useDispatch)(),t=(0,p.KW)(),n=(0,m.useStore)().getState(),r=(0,l.PQ)(n),a=(0,f.mT)(n),u=(0,l.et)(n).countryCode,O=(0,l.hP)(n),g=(0,s.qr)(n),y=(0,c.x)();(0,v.useEffect)((function(){function n(){return(n=(0,i.Z)(o().mark((function n(){var r,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!0,i=u&&u!==a,n.t0=!g,!n.t0){n.next=7;break}return n.next=6,h(y,O);case 6:n.t0=n.sent;case 7:r=n.t0,i&&!r&&t(u),e((0,l.oY)(r));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}r&&function(){n.apply(this,arguments)}()}),[])}},6804:function(e,t,n){"use strict";n.d(t,{Ux:function(){return p},kg:function(){return f}});n(55988);var r=n(73864),o=["Accordion","AccordionItem","Button","ButtonGroup","Card","CardBody","Dropdown","Overlay","OverlayTrigger","Portal","Provider","Search","Select","Selector","Slider","SwitchBase"],i=!1,a=["findDOMNode"],u=n(4497),c=n(19291),s={name:r.APP_NAME,level:u.zq.INFO,remote:!0,remoteUrl:r.APP_LOG_ENDPOINT,method:"POST",flushInterval:500},l=/((Script error)|webkitExitFullScreen)/i;var f=(0,u.YR)(s);function p(){(0,c.Lf)()&&(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=/strict(-| )?mode/gi,r=/Unexpected key "\w+" found in previous state received by the reducer/,u=e.error;e.error=function(c){for(var s,l,f=arguments.length,p=new Array(f>1?f-1:0),d=1;d<f;d++)p[d-1]=arguments[d];if(null!==c&&void 0!==c&&null!==(s=c.match)&&void 0!==s&&s.call(c,r)){if(!i)return i=!0,void(t&&e.warn('Suppressing "Unexpected key found warning from Redux, due to Pandora slice injection"'));if(i)return}if(null!==c&&void 0!==c&&null!==(l=c.match)&&void 0!==l&&l.call(c,n)){var v,m=(null===p||void 0===p||null===(v=p[0])||void 0===v?void 0:v.split(",").map((function(e){return e.trim()})))||[];if(m.length&&!m.filter((function(e){return!o.includes(e)})).length)return;if(a.includes(p[0])&&o.includes(null===p||void 0===p?void 0:p.find((function(e){return e!==p[0]}))))return}u.call.apply(u,[e,c].concat(p))},t&&e.warn("Workaround: Ignoring React strict-mode errors originating from spectrum v2 components. Components: ".concat(o.join(", "),". Methods: ").concat(a.join(", "),"."))}(console,!0),function(e){var t=e.onerror;e.onerror=function(e,n,r,o,i){return l.test(e)||f.error({src:n,ln:r,col:o,error:i,label:"uncaught_error"},e),"function"!==typeof t||t(e,n,r,o,i)}}(window))}},92586:function(e,t,n){"use strict";var r=n(809),o=n.n(r),i=n(92447),a=n(26265),u=n(49675),c=n(41681);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(l({},e),{},{response:function(e){if(+(null===e||void 0===e?void 0:e.status)>=300)throw e;return e}}),n=(0,u.Z)(t),r=function(){var e=(0,i.Z)(o().mark((function e(t,r){var i,a,u,s,f,p,d=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.length>2&&void 0!==d[2]?d[2]:{},a=d.length>3?d[3]:void 0,u=(0,c.ft)(r),s=(0,c.qd)(),f=l(l({},t&&{Authorization:"Bearer ".concat(t)}),i),e.prev=5,e.next=8,n.get("".concat(s,"/ims/coppa/status?client_id=").concat(u.clientId),{logger:a,credentials:"include",headers:f});case 8:return p=e.sent,e.abrupt("return",p);case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}();return l(l({},n),{},{getCoppaStatus:r})}()},47130:function(e,t,n){"use strict";n.d(t,{Z:function(){return d},G:function(){return v}});var r=n(65474),o=n.n(r),i=n(8777),a=n.n(i),u=n(87835),c=n(19291),s=n(49675),l=n(34155),f={keepAlive:!0,timeout:s.L.SOCKET_TIMEOUT};l.env.APP_ENV===u.T.LOCAL&&(f.rejectUnauthorized=!1);var p=(0,c.Lf)()?void 0:new(a().Agent)(f);function d(){return p}function v(){return new(o().Agent)(f)}},92017:function(e,t,n){"use strict";n.d(t,{ON:function(){return f},Uf:function(){return p}});var r=n(59937),o=n.n(r),i=n(73864),a=n(57332),u=new RegExp("^(".concat(o().STORE,")?/?").concat(a.Z.ERROR,"(/)?$")),c=Object.values(i.APP_ENTRIES).join("|"),s=Object.values(o()).join("|"),l=new RegExp("^(".concat(s,")((/)?$|((").concat(c,")(/)?$))"));function f(e){return l.test(e)}function p(e){return u.test(e)}},24626:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(67294),o=n(34937),i=n(60718),a=r.createElement,u=function(e){var t=e.content;return a(o.ContentEntryProvider,{value:t,model:i.HQ.queryCollection},a(i.HQ,null))}},49675:function(e,t,n){"use strict";n.d(t,{L:function(){return s},Z:function(){return l}});var r,o=n(26265),i=n(73864),a=n(10982);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT"}(r||(r={}));var s={DEFAULT_HTTP_TIMEOUT:i.DEFAULT_HTTP_TIMEOUT,SHORT_HTTP_TIMEOUT:i.SHORT_HTTP_TIMEOUT,SOCKET_TIMEOUT:i.DEFAULT_HTTP_TIMEOUT,IMS_HEALTH_CHECK_TIMEOUT:3e3};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c({},e),n=(0,a.intercept)(t,a.fetch),o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(e,c({timeout:i.DEFAULT_HTTP_TIMEOUT},t)).then((function(e){return e.text().then((function(t){var n=t?JSON.parse(t):{};return r.includeHeaders?{data:n,headers:e.headers}:n}))}))},u=function(e,t,n){return o(e,c({method:r.GET},t),n)},s=function(e,t,n){return o(e,c({method:r.POST},t),n)},l=function(e,t,n){return o(e,c({method:r.PUT},t),n)};return{_fetch:n,get:u,post:s,put:l}}},30056:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Br},reportWebVitals:function(){return qr}});var r,o=n(809),i=n.n(o),a=n(26265),u=n(92447),c=n(7544),s=n(37244),l=n.n(s),f=n(67294),p=n(54589),d=n(56746);!function(e){e.UC="ucv3",e.I2T="i2t"}(r||(r={}));var v=n(6804),m=n(24817),O=n(57606),g=n(43928),y=n(42774),h=n(60149),E=n(42939),P=n(99246),T=n(96029),b=n(65455),S=n(62482),I=n(19291),C=n(40705),_=n(30137),A=n(8703),w=n(61792),D=n(92017),R=n(70721),j=n(80827),k=n(78831),x=n(30488),U=n(11426),N=n(59937),Z=n.n(N),L=(n(37005),n(10975));var M=n(77081),F=n(92586);function q(){return(q=(0,u.Z)(i().mark((function e(t,n){var r,o,a,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=u.length>3?u[3]:void 0,e.next=4,F.Z.getCoppaStatus(t,n,r,o);case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",B(!!t,a));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){var n,r,o=null!==(n=null===t||void 0===t?void 0:t.blockCreateAccount)&&void 0!==n&&n,i=null!==(r=null===t||void 0===t?void 0:t.blockLogin)&&void 0!==r&&r;return e?i:o}var H=n(85475),W=n(55988),V=n(12510),G=function(){var e=(0,V.useStore)(),t=(0,H.w)(),n=(0,d.useAppError)().setError,r=(0,W.t)().pathname;(0,f.useEffect)((function(){var o=e.getState(),i=(0,M.Gg)(o),a=(0,w.PR)(o),u=function(e){var t=e.clientSessionId,n={};return t&&(n[L.A.name.X_ADOBE_CLIENTSESSION]=t),n}(i),c=(0,T.pP)(o),s=(0,b.dm)(o).termsOfUseUrl;(0,D.ON)(Z().STORE+r)&&function(e,t){return q.apply(this,arguments)}(a.accessToken,c,u,t).then((function(e){e&&n(new d.AppError("COPPA Error",d.ErrorType.FATAL,"COPPA:DEFAULT_FATAL_ERROR",{contentVariables:{termsOfUseUrl:s}}))}))}),[])},z=n(23424),X=n(62452),$=n(77974),K=n(57332);function Y(e){return![K.Z.DTM_IFRAME,K.Z.PAYPAL,K.Z.LEARN_MORE_DIALOG,K.Z.CONFIRMATION,K.Z.POST_IMS_WORKFLOW,K.Z.HEALTH,K.Z.PRELOAD,K.Z.LINK_GENERATOR,K.Z.OFFER_VALIDATOR,K.Z.DASHBOARD_IFRAME].includes(e)}var Q=n(14157),J=n(26075),ee=n(2385),te=n(9556),ne=n(31549),re=n(36623),oe=n(61274),ie=n(20236),ae=n(34155),ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];function r(){var n=(ae.env.TEAMS_SUPPORTED_COUNTRIES||"US").replace(/\s/g,"").split(",");return"US"===t&&!!e||n.includes(t)}return n.includes(P.R.UC_FORCE_TEAMS)||r()&&n.includes(P.R.UC_TEAMS)},ce=n(69355),se=function(){var e=(0,z.g)([P.R.UC_TEAMS,P.R.UC_FORCE_TEAMS]),t=(0,ce.useCookies)().get(ie.e.SHOW_TEAMS_COOKIE),n=(0,V.useSelector)(b.mT);return(0,f.useMemo)((function(){var r=Object.keys(e).filter((function(t){return e[t]}));return ue(t,n,r)}),[e,t,n])};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe,de=n(37703),ve=function(){var e=(0,de.useStore)().getState(),t=(0,W.t)().currentRoute,n=(0,T.vl)(e),r=(0,z.g)([P.R.P_UC_PREVENT_UCV2_REDIRECTION])[P.R.P_UC_PREVENT_UCV2_REDIRECTION],o=!!n[l().app.AFF_PROMO_NAME.name],a=(0,Q.k)(),c=function(){var e,t=(0,J.x)(),n=(0,W.t)().currentRoute,r=(0,V.useSelector)(b.mT),o=(0,V.useSelector)(b.n$),a=null===(e=(0,V.useSelector)(w.et))||void 0===e?void 0:e.userId,c=(0,V.useSelector)(U.tT),s=(0,V.useSelector)(re.Jm),p=(0,V.useSelector)(T.wT),d=(0,V.useSelector)(T.vl)[l().app.CLIENT_ID.name],v=(0,V.useSelector)(T.vl)[l().app.SVAR.name],m=(0,z.g)(P.R.P_UC_USE_TEST_CAMPAIGNS)[P.R.P_UC_USE_TEST_CAMPAIGNS],O=(0,oe.d0)(),g=se(),y=(0,f.useState)(!0),h=y[0],E=y[1];return(0,f.useEffect)((function(){var e=!0;function l(){return(l=(0,u.Z)(i().mark((function u(){var l,f,y,h,P,T,b,S,I,C;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=[],s&&l.push(s),n===K.Z.COMMITMENT&&l&&p&&!l.includes(p)&&l.push(p),!(l.length>0&&r)){i.next=11;break}return f={clientId:d,country:r,locale:o,promotionCodes:O,svar:v,userId:a,useTestCampaign:m},y=n===K.Z.BUNDLE?(0,te.DA)(fe(fe({},f),{},{offerIds:c?[c]:l})):(0,ne.q)(fe(fe({},f),{},{offerIds:l})),h=n===K.Z.BUNDLE?te.d7:ne.l,i.next=9,t.query({query:h,variables:y});case 9:P=i.sent,e&&(S=n===K.Z.BUNDLE?"bundleOffers":"commitmentVariantsOffers",(I=null===P||void 0===P||null===(T=P.data)||void 0===T||null===(b=T[S])||void 0===b?void 0:b.result).length||n===K.Z.BUNDLE||n===K.Z.RECOMMENDATION?(C=I.find((function(e){var t;return null===e||void 0===e||null===(t=e.offers)||void 0===t?void 0:t.find((function(e){var t,n,r,o;return(null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(n=t.pricePoint)||void 0===n?void 0:n.includes("PROMO_AFFINITY"))||(null===e||void 0===e||null===(r=e.offer)||void 0===r?void 0:r.commitment)===ee.y3.Perpetual||(null===e||void 0===e||null===(o=e.offer)||void 0===o?void 0:o.customerSegment)===ee.op.Team&&!g}))})),E(!C)):E(!1));case 11:case"end":return i.stop()}}),u)})))).apply(this,arguments)}return n!==K.Z.SEGMENTATION&&Y(n)?function(){l.apply(this,arguments)}():E(!0),function(){e=!1}}),[p,t,d,r,n,g,o,O,s,c,v,a,m]),h}();return!(!Y(t)||r)&&((0,w.D7)(e)||!c&&!a||o)},me=n(36015),Oe=f.createElement;!function(e){e.MEDIUM="medium",e.LARGE="large"}(pe||(pe={}));var ge=function(e){var t=(0,de.useSelector)(b.wJ),n=(0,de.useStore)(),r=n.getState(),o=(0,b._2)(r),i=(0,T.vl)(r),a=(0,b.eX)(r),u=(0,H.w)();G();var c=(0,z.g)([P.R.UC_FORCE_SEGMENTATION_CHALLENGER,P.R.UC_NEW_USER_IFRAME]),s=(0,C.WM)(n.getState(),c);(0,U.Nk)();var p=(0,$.p)(),d=p.handleInAppRestartWorkflow,v=p.isInAppUnauth,m=(0,x.useCommerceAppContext)(),N=m.emitMessage,Z=m.isInApp,L=m.isInIframe,M=(0,de.useSelector)(w.PQ),F=(0,W.t)().currentRoute,q=!M&&L(),B=(0,X.eR)(j.N$.EXTERNAL);(0,f.useEffect)((function(){if(!v()||(0,D.Uf)(F)||a){if(q&&!(0,D.Uf)(F)&&!c[P.R.UC_NEW_USER_IFRAME]){u.info("Redirecting unauthenticated iframe user");var e=(0,S.tl)(i,F);B(e),N(x.SystemMessage.CLOSE,{status:me.WorkflowStatus.ORDER_INCOMPLETE})}}else d()}),[]);var V=(0,X.eR)(),K=(0,X.nV)(),Y=(0,X.eR)(j.N$.SWITCH),Q=ve();(0,f.useEffect)((function(){if(Q){var t=(0,S.XU)((0,I.$5)(i,null===e||void 0===e?void 0:e.segmentationOfferId));Z()?K(t):L()?Y(t):V(t)}}),[Q]);var J=(0,de.useSelector)(T.By)===l().app.LAYOUT.values.SLIM,ee=(0,de.useSelector)(T.F5)===l().app.THEME.values.CCX,te=L()&&J&&ee;return Oe(k.HK,null,Oe(O.default,{typekitId:t||"nil6fkt",theme:"light",scale:pe.MEDIUM,className:"".concat(te?g.Z.ucv3SpectrumWrapperForCcxModal:g.Z.ucv3SpectrumWrapper)},Oe(y.Provider,{theme:s?h.r:E.r,colorScheme:"light",locale:o,scale:pe.MEDIUM},Oe(f.Fragment,null,Q||(v()||q&&!c[P.R.UC_NEW_USER_IFRAME])&&!a?Q&&Z()?Oe(_.b,{workflow:A.q.UNSUPPORTED_COUNTRY}):Oe(R.a,{delay:300}):e.children))))},ye=n(27261),he=n(76410);function Ee(){var e=(0,ye.Z)(["\n  fragment TrialConversionData on User {\n    canConvertBusinessTrial(items: $items) {\n      convertible\n      trialContractId\n      trialUsersCount\n      organizationName\n      organizationId\n    }\n  }\n"]);return Ee=function(){return e},e}function Pe(){var e=(0,ye.Z)(["\n  query CHECK_TRIAL_CONVERSION($items: [CartItemInput!]!) {\n    user {\n      id\n      canConvertBusinessTrial(items: $items) {\n        convertible\n        organizationId\n        organizationName\n        trialContractId\n        trialUsersCount\n      }\n    }\n  }\n"]);return Pe=function(){return e},e}var Te=(0,he.Ps)(Pe()),be=((0,he.Ps)(Ee()),n(45800));function Se(){var e=(0,ye.Z)(["\n      fragment MyOffer on PersonalizedOffer {\n        offer {\n          customerSegment\n        }\n      }\n    "]);return Se=function(){return e},e}var Ie="serverside_redirect";function Ce(e,t){var n=t.readFragment({id:"PersonalizedOffer:UC_COMMITMENT_VARIANTS:".concat(e),fragment:(0,he.Ps)(Se())});return(null===n||void 0===n?void 0:n.offer.customerSegment)===be.op.Team}function _e(e){return(0,T.yq)(e)[0]}function Ae(e,t,n){return we.apply(this,arguments)}function we(){return(we=(0,u.Z)(i().mark((function e(t,n,r){var o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.accessToken,e.next=3,t.query({query:Te,variables:{items:{offerId:r,quantity:1}},context:{headers:(0,a.Z)({},L.A.name.AUTHORIZATION,u)}});case 3:return c=e.sent,e.abrupt("return",null===(o=c.data)||void 0===o?void 0:o.user.canConvertBusinessTrial);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t){null===e||void 0===e||e.writeHead(302,{Location:t}),null===e||void 0===e||e.end()}function Re(e,t){return je.apply(this,arguments)}function je(){return(je=(0,u.Z)(i().mark((function e(t,n){var r,o,a,u,c,s,l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.res,o=n.apolloClient,a=n.features,u=(0,b.mT)(t),!0,c={convertible:!1},!ue(true,u,a)){e.next=14;break}if(s=_e(t),!Ce(s,o)){e.next=14;break}if(!(0,w.H0)(t)){e.next=14;break}return l=(0,w.PR)(t),e.next=12,Ae(o,l,s);case 12:(c=e.sent).convertible||(f=(0,b.dm)(t).teamAdminConsoleUrl,n.logger.info({label:Ie},"Team Admin redirected to Admin Console"),De(r,f));case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=n(49452),xe=n(22584),Ue=n(24626),Ne=n(20544);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Le=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,M.Of)(e))},Me=(n(91229),n(38347)),Fe=(n(9008),n(14255)),qe=n(59508),Be=n(46706),He=n(79725),We=n(87835),Ve=n(3810),Ge=n(46576),ze=n(73864),Xe=n(70734),$e=n(10982),Ke=n(47130);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je=[Ve.m,Ge.mw,Xe.m],et={request:function(e,t){var n,r;if(null!==(n=t)&&void 0!==n&&n.body)try{var o,i;r=JSON.parse(t.body.toString()),Je.includes(null===(o=r)||void 0===o?void 0:o.operationName)&&(t=Qe(Qe({},t),{},{timeout:ze.SHORT_HTTP_TIMEOUT})),t.logMeta={},null!==(i=r)&&void 0!==i&&i.operationName&&(t.logMeta.operationName=r.operationName)}catch(a){}return[e,t]}};var tt=n(13984),nt=n(44586);function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=function(e){var t=e.getState(),n=e;return new Be.i((function(e,r){return e.setContext((function(e){var r,o,i=e.headers;return{headers:ot(ot((o={},(0,a.Z)(o,L.A.name.X_REQUEST_ID,(0,nt.Z)()),(0,a.Z)(o,L.A.name.X_ADOBE_CLIENTSESSION,(0,M.Oy)(t)),(0,a.Z)(o,L.A.name.X_CONTENT_VARIATION,(null===(r=n.getPersonalizedContentVariationByAEMQueryName)||void 0===r?void 0:r.call(n,"product-content"))||""),o),(0,T.kk)(t)&&(0,a.Z)({},L.A.name.X_ADOBE_TEST_FLAG,(0,T.kk)(t))),i)}})),r(e)}))},at=function(e,t){return(0,tt.q)((function(n){var r,o=n.graphQLErrors,i=n.operation,u=i.getContext(),c=(0,a.Z)({},L.A.name.X_REQUEST_ID,null===(r=u.headers)||void 0===r?void 0:r[L.A.name.X_REQUEST_ID]);null!==o&&void 0!==o&&o.length&&o.forEach((function(n){var r=n.message,o=n.extensions;e.error(ot(ot({},t),{},{headers:c,operationName:i.operationName,code:null===o||void 0===o?void 0:o.code,message:r}))}))}))},ut=n(59831);function ct(e){var t=function(e){if((0,Ne.D)()!==We.T.PRODUCTION)return(0,T.vl)(e.getState())[l().app.CHAOS.name]}(e),n=function(e){return(0,T.vl)(e.getState())[l().app.ADD_FEATURES.name]}(e),r=(0,a.Z)({},L.A.name.X_API_KEY,function(e){var t=(0,T.pP)(e.getState());return(0,ut.Pi)(t)}(e));return t&&(r[L.A.name.X_CHAOS_FOR]=t),n&&(r[L.A.name.X_ADOBE_FEATURES]=n),r}var st,lt=n(41681),ft=n(68370),pt={Query:{fields:{order:{keyArgs:["id"],read:function(e,t){var n=t.args;return(0,t.toReference)({__typename:"Order",id:n.id})}},validPayments:{merge:!1},commitmentVariantsOffers:function(e,t){var n=t.args.input.sourceOfferIds.map((function(e){return t.toReference("CommitmentVariantsOffers:".concat(e))}));return n.every((function(e){return t.canRead(e)}))?{result:n,sourceIntent:ee._6.UcCommitmentVariants,__typename:"CommitmentVariantsOffersResult"}:e}}},AppliedPromotion:{keyFields:!1},BundleOffersResult:{fields:{resolvedSourceOfferIds:function(e,t){var n=t.readField,r=n("result");return(0,ft.Lh)(n,r)}}},CommitmentVariantsOffersResult:{fields:{resolvedSourceOfferIds:function(e,t){var n=t.readField,r=n("result");return(0,ft.Lh)(n,r)}}},CommitmentVariantsOffers:{keyFields:function(e){return"CommitmentVariantsOffers:".concat(e.sourceOfferId)}},PersonalizedOffer:{keyFields:function(e){return"PersonalizedOffer:".concat(e.sourceIntent,":").concat(e.offer.id)}},Offer:{keyFields:!1},Order:{fields:{cartPrice:{merge:!1},paymentInstrument:{merge:!1}}},Mergeable:{merge:!0}},dt={Mergeable:["CommitmentVariantsOffersResult","ComputedPrice","Currency","FulfillableItem","MultiformatText","Offer","OfferContent","OfferPrice","PersonalizedOfferAnalytics","ProductArrangement","Promotion"]},vt=n(34155),mt=(f.createElement,null);var Ot=!(0,I.Lf)()&&(parseInt(vt.env.PORT,10)||3e3),gt=(st={localhost:"http://localhost:".concat(Ot).concat(Z().STORE,"/graphql")},(0,a.Z)(st,We.T.LOCAL,"https://localhost.adobe.com".concat(Z().STORE,"/graphql")),(0,a.Z)(st,We.T.STAGE,"https://commerce-stg.adobe.com".concat(Z().STORE,"/graphql")),(0,a.Z)(st,We.T.PRODUCTION,"https://commerce.adobe.com".concat(Z().STORE,"/graphql")),st),yt="apollo-client";function ht(e,t){var n,r,o=!(0,I.Lf)(),i=function(e){return{apolloFetch:(0,$e.intercept)(et,$e.fetch),apolloFetchOptions:Qe(Qe({},!(0,I.Lf)()&&{agent:(0,Ke.G)()}),{},{logger:e,timeout:ze.DEFAULT_HTTP_TIMEOUT})}}(e),a=i.apolloFetch,u=i.apolloFetchOptions,c=(null!==(n=null===(r=t.getState().queryParams)||void 0===r?void 0:r.params)&&void 0!==n?n:{})[l().app.CTX.name],s=(0,lt.$M)(c),f=new Fe.u({uri:o?gt.localhost:gt[(0,Ne.D)()],credentials:"same-origin",fetchOptions:u,fetch:a,headers:ct(t)});return new qe.f({ssrMode:o,link:Be.i.from([it(t),at(e,{label:yt}),f]),name:s,version:"1.0.0",cache:new He.h({possibleTypes:dt,typePolicies:pt}),defaultOptions:{query:{errorPolicy:"all"},watchQuery:{errorPolicy:"all"}}})}function Et(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=null!==(e=mt)&&void 0!==e?e:ht(n,r);return t&&o.cache.restore(t),mt||(mt=o),o}var Pt,Tt=n(28140),bt=n(57663),St=n(298),It=["REMOVE_ITEM","SET_TAX_ID_SUPPORTED","UPDATE_ORDER"],Ct=function(e,t){switch(t){case"REMOVE_ITEM":(0,St.B2)(e.getState(),!0,"REMOVE_ITEM");break;case"SET_TAX_ID_SUPPORTED":(0,St.B2)(e.getState(),!1,"SET_TAX_ID_SUPPORTED");break;case"UPDATE_ORDER":(0,St.B2)(e.getState(),!0,"UPDATE_ORDER")}},_t=function(e,t,n){return function(r){return function(o){return function(i){var a=o(i);try{var u=i.type;u.includes("/")&&(u=u.split("/")[1]),e.includes(u)&&t(r,u)}catch(tt){n.error({error:tt,label:"analytics"})}return a}}}},At=n(84363),wt=n(38676),Dt=n(80605);function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt,xt="paypalState",Ut="SET_PAYPAL_RETURN_STATE",Nt="SET_PAYPAL_RETURN_LOADING_STATE",Zt={isPaypalReturn:!1,isPaypalReturnLoading:!1},Lt=(Pt={},(0,a.Z)(Pt,Ut,(function(e,t,n){return jt(jt({},n),{},{isPaypalReturn:t.payload})})),(0,a.Z)(Pt,Nt,(function(e,t,n){return jt(jt({},n),{},{isPaypalReturnLoading:t.payload})})),Pt),Mt=(0,Dt.Db)(Ut),Ft=(0,Dt.Db)(Nt),qt=function(e,t){var n=e.createSlice(xt,Lt,t||Zt);return function(e,t){return{getPaypalReturnState:function(){return e.getState().paypalState.isPaypalReturn},getPaypalReturnLoadingState:function(){return e.getState().paypalState.isPaypalReturnLoading},setPaypalReturnState:function(e){return t(Mt(e))},setPaypalReturnLoadingState:function(e){return t(Ft(e))}}}(e,n.dispatch)},Bt=n(20573);function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt,Gt,zt="queryParams",Xt="SET_QUERY_PARAMS",$t="SET_STARTING_STEP",Kt="SET_STEP_WIZARD_COOKIE",Yt={params:void 0},Qt=(kt={},(0,a.Z)(kt,Xt,(function(e,t){return{params:Wt({},t.payload)}})),(0,a.Z)(kt,$t,(function(e,t,n){return{params:Wt(Wt({},n.params),{},{ss:t.payload})}})),(0,a.Z)(kt,Kt,(function(e,t,n){return{params:Wt(Wt({},n.params),{},{swc:t.payload})}})),kt),Jt=(0,Dt.Db)(Xt),en=(0,Dt.Db)($t),tn=(0,Dt.Db)(Kt),nn=function(e){var t;return null===(t=e.queryParams)||void 0===t?void 0:t.params},rn=(0,Bt.P1)([nn],(function(e){return Wt({},e)})),on=(0,Bt.P1)([nn],(function(e){return(null===e||void 0===e?void 0:e[l().app.CTX.name])||""})),an=(0,Bt.P1)([nn],(function(e){var t;return(null===e||void 0===e||null===(t=e[l().app.ITEMS.name])||void 0===t?void 0:t.map((function(e){return e.id})))||[]})),un=(0,Bt.P1)([nn],(function(e){return null===e||void 0===e?void 0:e[l().app.ORIGINAL_OFFER_ID.name]})),cn=(0,Bt.P1)([nn],(function(e){var t;return(null===e||void 0===e||null===(t=e[l().app.RECOMMENDATION_REQUEST_ITEMS.name])||void 0===t?void 0:t.map((function(e){return e.id})))||[]})),sn=(0,Bt.P1)([nn],(function(e){return null===e||void 0===e?void 0:e[l().app.STEP_WIZARD_COOKIE.name]})),ln=function(e,t){return{getQueryParams:function(){return rn(e.getState())},getApplicationContext:function(){return on(e.getState())},getQueryParamsOfferIds:function(){return an(e.getState())},getQueryParamsOriginalOfferId:function(){return un(e.getState())},getQueryParamsRecommendationRequestOfferIds:function(){return cn(e.getState())},getStepWizardCookieParam:function(){return sn(e.getState())},getAtfParam:function(){return function(e){var t,n;return null===(t=e.queryParams)||void 0===t||null===(n=t.params)||void 0===n?void 0:n[l().app.ADOBE_TEST_FLAGS.name]}(e.getState())},getCtxReturnUrl:function(){return function(e){var t,n;return null===(t=e.queryParams)||void 0===t||null===(n=t.params)||void 0===n?void 0:n[l().app.CTX_RETURN_URL.name]}(e.getState())},setQueryParams:function(e){return t(Jt(e))},setStartingStep:function(e){return t(en(e))},setStepWizardCookieParam:function(e){return t(tn(e))}}};function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dn=(0,wt.combineReducers)((Vt={},(0,a.Z)(Vt,re.fu,re.ZP),(0,a.Z)(Vt,"configurationData",b.ZP),(0,a.Z)(Vt,"paypalState",bt.ZP),(0,a.Z)(Vt,"queryParams",T.ZP),(0,a.Z)(Vt,M.wC,(function(e){return e||null})),(0,a.Z)(Vt,"user",w.ZP),Vt)),vn=function(e,t){return Gt||(Gt=mn(e,t)),Gt},mn=function(e,t){var n=[].concat((0,Tt.Z)((0,At.Bx)({thunk:!1,immutableCheck:{ignoredPaths:["stepWizard"]}})),[_t(It,Ct,t)]),r=(0,At.xC)({reducer:function(e){return e},preloadedState:e,middleware:n,enhancers:[On]});return r.reducerHub.addReducer(dn),r},On=function(e){return function(t,n){var r=n.paypalState,o=n.queryParams,i=n.personalizedContent,a=(0,Me.Z)(n,["paypalState","queryParams","personalizedContent"]),u=(0,Dt.iD)(e)(t,a),c=qt(u,r),s=function(e,t){var n=e.createSlice(zt,Qt,t||Yt).dispatch;return ln(e,n)}(u,o),l=(0,C.vZ)(u,i);return pn(pn(pn(pn({},u),l),c),s)}};var gn=n(47758),yn=n(97127),hn=n(24166),En=n(5764),Pn=f.createElement,Tn=function(e){var t=e.children;return Pn(En.en,{initWizardStepNames:yn.Z4,children:t})},bn=function(e){var t=e.children;return Pn(En.en,{initWizardStepNames:yn.fT,children:t})},Sn=n(19014),In=n(57876),Cn=n(29843);function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=["navigationStart","fetchStart","requestStart","responseStart","responseEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],Dn="app:mounted",Rn=/TypeKitCss:wf/i,jn="AdjustedTTDI";function kn(e,t,n,r){var o=window.performance;if(null!==o&&void 0!==o&&o.getEntriesByType){o.mark&&o.measure&&(o.mark(Dn),o.measure("PT",void 0,"fetchStart"),o.measure("AdjustedTTI","fetchStart",Dn));var i=function i(){var u=o.getEntriesByType("mark").some((function(e){return Rn.test(e.name)}));window.removeEventListener("load",i),setTimeout((function(){var i;o.measure&&o.measure(jn,"fetchStart","domInteractive");var u=function(e){var t,n=null===(t=e.getEntriesByType("navigation"))||void 0===t?void 0:t[0];if(n)return wn.slice(1).reduce((function(e,t){var r;return e[t]=null!==(r=Math.round(n[t]))&&void 0!==r?r:"-",e}),{navigationStart:0});if(null!==e&&void 0!==e&&e.timing){var r=e.timing[wn[0]];return wn.reduce((function(t,n){return t[n]=e.timing[n]?e.timing[n]-r:"-",t}),{})}return{}}(o),c=function(e){var t=e.getEntriesByType("paint");return null===t||void 0===t?void 0:t.reduce((function(e,t){return e[t.name]=Math.round(t.startTime),e}),{})}(o),s=function(e){var t=e.getEntriesByType("mark");return null===t||void 0===t?void 0:t.reduce((function(e,t){return e[t.name]=Math.round(t.startTime),e}),{})}(o),l=function(e){var t=e.getEntriesByType("measure");return null===t||void 0===t?void 0:t.reduce((function(e,t){return e[t.name]=Math.round(t.duration),e}),{})}(o),f=s["TypeKitCss:wf-active"]||s["TypeKitCss:wf-inactive"],p=Math.round(f-function(e,t){var n,r=null===(n=e.getEntriesByType("navigation"))||void 0===n?void 0:n[0];return r?r[t]:e.timing?e.timing[t]-e.timing.navigationStart:void 0}(o,"fetchStart")),d=Math.max(p,l.AdjustedTTDI);e.info({auth:t,type:"perf",label:"timing",marks:s,timing:u,measures:An(An({},l),{},(i={},(0,a.Z)(i,jn,d),(0,a.Z)(i,"TypeKitCss:ready",p),i)),paintTimes:c,realDocumentReferrer:(0,Cn.H)(n),preloadUsed:!(null===r||void 0===r||!r.get(ie.e.PRELOAD_COOKIE))})}),u?100:3e3)};"complete"===document.readyState?i():window.addEventListener("load",i)}}function xn(e){return Un.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(i().mark((function e(t){var n,r,o,a,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.req,r=t.res,o=t.store,a=n.configurationData||{},u=r.userDevice,c=r.userId,o.dispatch((0,b.Qo)(a)),o.dispatch((0,w.cL)(u)),c&&o.dispatch((0,w.Iv)(c));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nn,Zn=n(32292),Ln=n(27361),Mn=n.n(Ln),Fn=n(69328),qn=n.n(Fn);!function(e){e.TYPE1="type1",e.TYPE2="type2",e.TYPE2E="type2e",e.TYPE3="type3"}(Nn||(Nn={}));var Bn=n(52608),Hn=n(68929),Wn=n.n(Hn),Vn=n(51584),Gn=n.n(Vn),zn=n(81763),Xn=n.n(zn),$n=n(47037),Kn=n.n($n);function Yn(e){return Qn(e,Wn())}function Qn(e,t){if(void 0!==e&&null!==e){var n=Array.isArray(e)?[]:{};if(Kn()(e)||Xn()(e)||Gn()(e))return e;for(var r in e)n[Array.isArray(e)?r:t.call(this,r)]=Qn(e[r],t);return n}}var Jn=n(19547),er=n(19529),tr=function(){var e=(0,u.Z)(i().mark((function e(t,n){var r,o,a,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=u.length>3?u[3]:void 0,e.next=4,er.Z.getImsAccessToken(t,n,r,o);case 4:return a=e.sent,e.abrupt("return",Yn(a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nr=n(93719),rr=function(){var e=(0,u.Z)(i().mark((function e(t,n){var r,o,a,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=u.length>3?u[3]:void 0,e.next=4,er.Z.getImsProfileAndToken(t,n,r,o);case 4:return a=e.sent,e.abrupt("return",Yn(a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),or=n(75295);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=function(){var e=(0,u.Z)(i().mark((function e(t,n){var r,o,a,u,c,s,l,f,p,d,v=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},o=v.length>3?v[3]:void 0,e.next=4,(0,or.Y)(r,o);case 4:return a=e.sent,e.next=7,er.Z.getImsProfileAndTokenFromImplicitJumpToken(t,a,n,r,o);case 7:return u=e.sent,c=u.data,s=u.headers,l=Yn(c),f=l.profile,p=(0,Me.Z)(l,["profile"]),d=ar(ar({},p),f),e.abrupt("return",{profileAndToken:d,headers:s});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cr=n(24129);function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var lr="IMS Authentication";function fr(e){return!!e.store.getState().user.accessToken}function pr(e){return e.store.getState().user.unsupportedAccountType}function dr(e,t,n){vr(e,n),e.store.dispatch((0,w.Iv)(void 0))}function vr(e,t){e.req.query&&(delete e.req.query[l().IMS.CODE],delete e.req.query[l().IMS.ERROR],delete e.req.query[l().IMS.IJT],delete e.req.query[l().IMS.STATE]),e.store.dispatch((0,T.BT)(e.req.query));var n=(0,S.tW)(e.req.query),r="".concat(t.pathname,"?").concat(n);e.req.url=r}function mr(e){var t,n=null!==(t=e.req.socket.remoteAddress)&&void 0!==t?t:"",r=e.req.headers[L.A.name.X_FORWARDED_FOR];return n=(null!==r&&void 0!==r?r:n).split(",")[0]}function Or(e,t){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(i().mark((function e(t,n){var r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.req.logger,o=n.res[cr.s.CLIENT_SESSION_ID],u=(0,a.Z)({},L.A.name.X_ADOBE_CLIENTSESSION,o),e.next=5,rr(t,(0,m.pP)(n),u,r);case 5:br(e.sent,n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,u.Z)(i().mark((function e(t,n,r){var o,u,c,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.req.logger,u=n.res[cr.s.CLIENT_SESSION_ID],c=(0,a.Z)({},L.A.name.X_ADOBE_CLIENTSESSION,u),(0,Ne.D)()!==We.T.LOCAL&&(c[L.A.name.X_CIP]=mr(n)),e.next=6,ur(t,(0,m.pP)(n),c,o);case 6:s=e.sent,l=s.headers,br(s.profileAndToken,n,r,l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(e){if(!e){throw"INVALID_AUTH_CODE"}}function Pr(e,t,n){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,u.Z)(i().mark((function e(t,n,r){var o,u,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er(t),u=n.req.logger,c=n.res[cr.s.CLIENT_SESSION_ID],o={},(0,a.Z)(o,L.A.name.X_ADOBE_CLIENTSESSION,c),(0,a.Z)(o,L.A.name.X_CIP,mr(n)),s=o,e.next=6,tr(t,(0,m.pP)(n),s,u);case 6:br(e.sent,n,r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function br(e,t,n,r){if(e){var o=e.accessToken,i=(e.refreshToken,e.expiresIn,e.tokenType,(0,Me.Z)(e,["accessToken","refreshToken","expiresIn","tokenType"]));i.accountType===Nn.TYPE1?(function(e,t,n){n.store.dispatch(Yn((0,w.$l)(t))),n.store.dispatch((0,w.M8)(e))}(o,i,t),function(e,t){try{if(e){var n=(0,Bn.buildCookies)(t.req,t.res),r=qn().splitCookiesString(e.get(L.A.name.SET_COOKIE));qn().parse(r,{map:!1}).forEach((function(e){var t=e.name,r=e.value,o=(0,Me.Z)(e,["name","value"]);n.set(t,r,Jn.CookieTypes.REQUIRED,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o))}))}}catch(tt){t.req.logger.warn({error:tt,label:lr},"Set Cookie Failed")}}(r,t)):t.store.dispatch((0,w.fK)(!0)),n&&vr(t,n)}}function Sr(e){var t=e.req.url.split("?"),n=(0,Zn.Z)(t,2),r=n[0],o=n[1];return{pathname:r,urlParams:(0,S.rz)(o)}}function Ir(e){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(i().mark((function e(t){var n,r,o,a,u,c,s,f,p,d,v,m,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,Bn.buildCookies)(t.req,t.res),r=n.getAll(),o=Sr(t),a=r[ie.e.AUX_SID_COOKIE],u=o.urlParams[l().IMS.CODE],c=void 0!==u,s=o.urlParams[l().IMS.IJT],f=!!o.urlParams[l().IMS.ERROR],p="",e.prev=9,!s){e.next=16;break}return p="ijt",e.next=14,yr(s,t,o);case 14:e.next=35;break;case 16:if(!c){e.next=22;break}return p=u?"code":"blank",e.next=20,Pr(u,t,o);case 20:e.next=35;break;case 22:if(!f){e.next=27;break}p="error",dr(t,0,o),e.next=35;break;case 27:if(!a){e.next=33;break}return p="cookie",e.next=31,Or(a,t);case 31:e.next=35;break;case 33:p="none",dr(t,0,o);case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(9),dr(t,0,o);case 40:if(Mn()(t,"req.headers.referer","").startsWith((0,lt.qE)())&&(p+="-susi"),t.store.dispatch((0,w.rZ)(p)),!pr(t)){e.next=45;break}return e.abrupt("return");case 45:fr(t)||(d=(0,nr.zl)(n),v=d.email,m=void 0===v?"":v,O=d.emailStatus,t.store.dispatch((0,w.Ux)(m)),t.store.dispatch((0,w.Or)(O)));case 46:case"end":return e.stop()}}),e,null,[[9,37]])})))).apply(this,arguments)}var _r,Ar,wr=f.createElement,Dr=function(){return wr("script",{type:"text/javascript",async:!0,integrity:"sha512-eAYTo49JxwL7CEfdVNPhBLzqzYnmc8kNzLbFX0teDSZ2ayfRfW1rkoOwZVRMmerM0o1XKZM3PRmV4+XSQWWf4Q==",src:"https://cdnssl.clicktale.net/ss/4451/df7e164d-c711-4376-a4c8-8b364d648be0/12/uxa.js",crossOrigin:"anonymous",defer:!0})},Rr=n(54214),jr=n(56),kr=f.createElement;function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,v.Ux)();var Nr=function(e){var t=e.Component,n=e.pageProps,o=e.apolloClient,i=e.features,a=e.initialApolloState,u=e.initialStoreState,c=e.logger;(0,I.Lf)()&&!c&&(c=v.kg);var s=function(e,t){return(0,f.useMemo)((function(){return vn(e,t)}),[e,t])}(u,c),m=function(e,t,n){return(0,f.useMemo)((function(){return Et(e,t,n)}),[e,t,n])}(a,c,s),O=(0,gn.N)(i),g=(0,jr.TZ)(),y=(0,b.mT)(u),h=(0,b.n$)(u),E=(0,W.t)();_r=Ar,Ar=E.currentRoute,m=o||m;var S="local"===(0,Ne.D)()?xe.S3.STAGE:(0,Ne.D)(),C=(0,w.Yw)(u),A=(0,M.YL)(u),D=(0,ce.useCookies)(),R=[K.Z.PRELOAD,K.Z.LINK_GENERATOR].includes(Ar);(0,f.useEffect)((function(){R||kn(c,C,A,D)}),[]);var j,k=(j=E.currentRoute,(0,hn.sr)(j)===yn.CF.I2T?Tn:bn),x=O.includes(P.R.P_UC_APP_CONTEXT_LOCAL_DEV),U=O.includes(P.R.P_UC_ENABLE_PLACEHOLDER_CONTENT)||(0,Ne.D)()===xe.S3.LOCAL,N={includeStoreProvider:!0,includeAnalyticsProvider:!R,usePlaceholderContent:U},Z=(0,Sn.Xx)(Ar)?r.I2T:r.UC;var L,F=function(){var e=(0,T.vl)(s.getState()),t=e[l().app.CLIENT_ID.name],n=e[l().app.CTX.name],r=p.F.get(n);return{appName:Z,clientId:t,hostCtxId:r}}();x&&(L={openUrl:function(){}});var q=kr(f.Fragment,null,kr(ge,{segmentationOfferId:null===n||void 0===n?void 0:n.segmentationOfferId},kr(d.AppErrorBoundary,null,kr(Rr.O,null)),kr(d.AppErrorBoundary,{renderOnError:function(){return kr(Ue.j,{content:n.content})}},kr(d.AppErrorDispatcher,{error:null===n||void 0===n?void 0:n.error}),kr(k,null,kr(_.t,null,kr(t,n),kr(In.Z,null))))),kr(Dr,null)),B=kr(f.Fragment,null,kr(ge,{segmentationOfferId:null===n||void 0===n?void 0:n.segmentationOfferId},kr(t,n)));return kr(f.Fragment,null,kr(f.StrictMode,null,kr(ke.b,{analyticsClient:g,apolloClient:m,appContext:F,appContextOptions:L,country:y,env:S,featureFlags:O,store:s,language:h,logger:c,sessionCookieName:"ucv3",toggles:N},R?B:q)))},Zr=function(e,t){var n=(0,I.Lf)()?Lr(e):Mr(e);n&&t.dispatch((0,T.BT)(n))},Lr=function(e){var t,n=null===e||void 0===e||null===(t=e.ctx)||void 0===t?void 0:t.query,r=(0,S.tW)(n);return(0,S.rz)(r)},Mr=function(e){var t,n;return null===e||void 0===e||null===(t=e.ctx)||void 0===t||null===(n=t.req)||void 0===n?void 0:n.query},Fr=function(e){var t=e.getState(),n=(0,T.vl)(t)[l().app.PAYPAL.name]===l().app.PAYPAL.values.ACCEPT;e.dispatch((0,bt.p6)(n))};function qr(e){var t=e.label,n=e.name,r=e.startTime,o=e.value;if("custom"===t)switch(n){case"Next.js-render":null===v.kg||void 0===v.kg||v.kg.info({type:"perf",label:"transition",from:_r,to:Ar,duration:o,startTime:r},"transition")}}Nr.getInitialProps=function(){var e=(0,u.Z)(i().mark((function e(t){var n,r,o,a,u,s,f,p,d,O,g,y,h,E,P,T,b,S,C,_,A,w,D,R,j,k,x,U;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=Date.now(),y=null===(n=t.ctx)||void 0===n||null===(r=n.req)||void 0===r?void 0:r.logger,(0,I.Lf)()&&!y&&(y=v.kg),t.ctx.logger=y,(h=null===(o=t.ctx)||void 0===o||null===(a=o.req)||void 0===a?void 0:a.query)&&!h[l().app.STARTING_STEP.name]&&(P=null===(E=t.ctx.pathname)||void 0===E?void 0:E.split("/")[1])&&(h[l().app.STARTING_STEP.name]=P),h&&!h[l().app.STEP_WIZARD_COOKIE.name]&&(T=Math.floor(1e3+9e3*Math.random()).toString(),h[l().app.STEP_WIZARD_COOKIE.name]=T),t.ctx.features=(0,gn.h)(null===(u=t.ctx)||void 0===u||null===(s=u.res)||void 0===s?void 0:s.features),b=t.ctx.store=vn(Le(t.ctx),y),Zr(t,b),(0,I.Lf)()){e.next=17;break}if(t.ctx.pathname.includes(K.Z.PRELOAD)){e.next=14;break}return e.next=14,Ir(t.ctx);case 14:return Fr(b),e.next=17,xn(t.ctx);case 17:return S=t.ctx.apolloClient=Et(null,y,b),C=Date.now(),e.next=21,c.default.getInitialProps(t);case 21:if(_=e.sent,(0,I.Lf)()||((0,m.MC)(b.getState(),t.ctx,_),null!==(A=t.ctx)&&void 0!==A&&null!==(w=A.req)&&void 0!==w&&w.perf&&(t.ctx.req.perf.pagePropsInit=Date.now()-C)),D=b.getState(),(0,I.Lf)()){e.next=29;break}return e.next=27,Re(D,t.ctx);case 27:R=e.sent,b.dispatch((0,re.OM)({convertible:R.convertible,organizationId:R.organizationId,organizationName:R.organizationName,trialContractId:R.trialContractId,trialUsersCount:R.trialUsersCount}));case 29:D=b.getState(),j=S.cache.extract(),k=t.ctx.features,x=void 0===k?(0,gn.h)(null===(f=t.ctx)||void 0===f||null===(p=f.res)||void 0===p?void 0:p.features):k,U=Ur(Ur({},_),{},{features:x,initialApolloState:j,initialStoreState:D,logger:(0,I.Lf)()?y:void 0}),!1,e.next=38;break;case 37:U.initialApolloState=e.sent;case 38:return!(0,I.Lf)()&&null!==(d=t.ctx)&&void 0!==d&&null!==(O=d.req)&&void 0!==O&&O.perf&&(t.ctx.req.perf.appPropsInit=Date.now()-g),e.abrupt("return",U);case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Br=Nr},1375:function(e,t,n){"use strict";n.d(t,{Zb:function(){return f},Ib:function(){return p},B0:function(){return d}});var r=n(26265),o=n(41681),i=n(97803),a=n(24817),u=n(34155);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return(0,a.Z0)(e)?u.env.IMS_CLT_APP_SECRET:u.env.IMS_CLT_SECRET}function f(e){return s(s({},(0,o.ft)(e)),{},{secret:l(e)})}function p(){return{domain:(0,o.Fy)(),clientId:d(),secret:u.env.IMS_SVR_SECRET,authCode:u.env.IMS_SVR_AUTH_CODE}}function d(){return i.$.UNIFIED_CHECKOUT_SERVER}},75295:function(e,t,n){"use strict";n.d(t,{Y:function(){return d}});var r=n(809),o=n.n(r),i=n(92447),a=n(19529);function u(){return{expiry:Number.MAX_SAFE_INTEGER,tokenPromise:null}}var c=u();function s(e,t){return a.Z.getImsServiceToken(e,t)}function l(){return!c.tokenPromise||Date.now()>c.expiry}function f(e){return Date.now()+1e3*e.expires_in/1.2}function p(){c=u()}function d(){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)(o().mark((function e(){var t,n,r,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1?a[1]:void 0,e.prev=2,!l()){e.next=12;break}return c.expiry=Number.MAX_SAFE_INTEGER,c.tokenPromise=s(t,n),e.next=8,c.tokenPromise;case 8:r=e.sent,c.expiry=f(r),e.next=15;break;case 12:return e.next=14,c.tokenPromise;case 14:r=e.sent;case 15:i=r.access_token,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p();case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}},19529:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(809),o=n.n(r),i=n(92447),a=n(26265),u=n(49675),c=n(47130),s=n(60196);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f,p=(0,c.Z)(),d=function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.clone().json();case 3:n=e.sent,r=(0,s.oY)(t.url),i=new URLSearchParams(r.params).toString(),a=i?"".concat(r.url,"?").concat(i):"".concat(r.url),n&&f.info({data:n,path:a,status:t.status}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v={request:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({agent:p,compress:!0},t);return f=null===t||void 0===t?void 0:t.logger,[e,n]},response:function(e){if(+(null===e||void 0===e?void 0:e.status)>=300)throw f&&d(e),e;return e}},m=n(1375),O=n(10975),g=n(80129);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(){var e=(0,u.Z)(v),t=function(){var e=(0,i.Z)(o().mark((function e(t,r){var i,a,u,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:{},a=c.length>3?c[3]:void 0,(u=h({},(0,m.Zb)(r))).authCode=t,e.abrupt("return",n(u,i,a));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var t=(0,i.Z)(o().mark((function t(n){var r,i,a,u=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},i=u.length>2?u[2]:void 0,a={grant_type:"authorization_code",code:n.authCode,client_id:n.clientId,client_secret:n.secret},t.next=5,e.post("".concat(n.domain,"/ims/token/v2?").concat((0,g.stringify)(a)),{headers:h({},r),logger:i});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return h(h({},e),{},{getImsHealthCheck:function(t){var n=(0,m.Ib)();return e.get("".concat(n.domain,"/ims/healthcheck"),{headers:(0,a.Z)({},O.A.name.X_IMS_CLIENTID,n.clientId),timeout:u.L.IMS_HEALTH_CHECK_TIMEOUT,logger:t})},getImsProfileAndToken:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=(0,m.Zb)(n);return e.post("".concat(i.domain,"/ims/token/v3"),{body:(0,g.stringify)({grant_type:"aux_sid_exchange",client_id:i.clientId,client_secret:i.secret,aux_sid:t,scope:i.scopes,project_user_profile:!0}),headers:h({"Content-Type":"application/x-www-form-urlencoded"},r),timeout:u.L.SHORT_HTTP_TIMEOUT,logger:o})},getImsAccessToken:t,getImsProfileAndTokenFromImplicitJumpToken:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,a=(0,m.Zb)(r),c={client_id:a.clientId};return e.get("".concat(a.domain,"/ims/jump/implicit/").concat(t,"?").concat((0,g.stringify)(c)),{headers:h({Authorization:"Bearer ".concat(n)},o),timeout:u.L.SHORT_HTTP_TIMEOUT,logger:i},{includeHeaders:!0})},getImsServiceToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(0,m.Ib)();return n(r,e,t)}})}()},76363:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(30056)}])},33719:function(e){"use strict";if(typeof dtrace-provider==="undefined"){var t=new Error("Cannot find module 'dtrace-provider'");throw t.code="MODULE_NOT_FOUND",t}e.exports=dtrace-provider},35747:function(e){"use strict";e.exports=fs},1070:function(e){"use strict";if("undefined"===typeof mv){var t=new Error("Cannot find module 'mv'");throw t.code="MODULE_NOT_FOUND",t}e.exports=mv},12087:function(e){"use strict";e.exports=os},62816:function(e){"use strict";if(typeof safe-json-stringify==="undefined"){var t=new Error("Cannot find module 'safe-json-stringify'");throw t.code="MODULE_NOT_FOUND",t}e.exports=safe-json-stringify},77748:function(e){"use strict";if(typeof source-map-support==="undefined"){var t=new Error("Cannot find module 'source-map-support'");throw t.code="MODULE_NOT_FOUND",t}e.exports=source-map-support},71843:function(){},19917:function(){},65474:function(){},8777:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[9774,7949,9022,532,6618,809,7946,3433,8710,5898,3487,3377,6188,1721,9332,2734,7642,4106,4173,3728,4497,4732,7957,1913,718],(function(){return t(76363),t(72441)}));var n=e.O();_N_E=n}]);