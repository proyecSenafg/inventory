(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4054],{14834:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r=n(67294),o=n(12398),a=n(4285),i=n(37629),u=n(43773),l=n(5764),c=r.createElement,s=function(e){var t=e.backLabel,n=e.ctaLabel,s=e.disableCtaButton,d=void 0!==s&&s,f=e.onBackClick,p=e.onCtaClick,m=e.showBackButton,v=e.children,g=(0,l.R_)().loading,h=(0,r.useState)(!1),C=h[0],E=h[1];(0,r.useEffect)((function(){!g&&C&&E(!1)}),[g,C]);var y=(0,u.T)(),S=function(e){switch(e){case"btnNameCta":y(i.P.ACTION_CONTAINER_BUTTON_CLICK),E(!0),p();break;case"btnNameBack":y(i.P.ACTION_CONTAINER_BACK_CLICK),f()}};return c("div",{className:a.Z.actionContainer,"data-testid":"action-container"},c(o.default,{variant:"cta",disabled:d||C,onClick:function(){return S("btnNameCta")},"data-testid":"action-container-cta"},v&&c("span",{className:a.Z.ctaIcon},v),n),m&&c(o.default,{quiet:!0,variant:"secondary",disabled:C,onClick:function(){return S("btnNameBack")},"data-testid":"action-container-back-button"},t))}},30137:function(e,t,n){"use strict";n.d(t,{b:function(){return S},t:function(){return ue}});var r=n(67294),o=n(12398),a=n(93101),i=n(69429),u=n(298),l=n(65455),c=n(49313),s=n(34937),d=(0,s.defineContents)("externalworkflowpage",{headerDefault:{id:"headerDefault",type:"string",placeholderContent:"If you've made your purchase, get started now. (PH)"},messageDefault:{id:"messageDefault",type:"string",placeholderContent:"Please complete the purchase in your web browser. If you would like to purchase later, you can cancel now. (PH)"},cancelButtonDefault:{id:"cancelButtonDefault",type:"string",placeholderContent:"Cancel (PH)"},continueButtonDefault:{id:"continueButtonDefault",type:"string",placeholderContent:"Get Started (PH)"},headerChangePlan:{id:"headerChangePlan",type:"string",placeholderContent:"Switch your plan in your Adobe Account. (PH)"},messageChangePlan:{id:"messageChangePlan",type:"string",placeholderContent:"Once you are done, come back here and click Continue to proceed. If you would like to continue later, you can cancel for now. (PH)"},cancelButtonChangePlan:{id:"cancelButtonChangePlan",type:"string",placeholderContent:"Cancel (PH)"},continueButtonChangePlan:{id:"continueButtonChangePlan",type:"string",placeholderContent:"Continue (PH)"}}),f=n(8703),p=n(66537),m=n(52253),v=n(30488),g=n(12510),h=n(52007),C=n(66482),E=n(36015),y=r.createElement,S=(0,C.c)("checkout/external",d.__contentType,d)((function(e){var t=e.workflow,n=(0,s.useContentEntry)(d),C=(0,v.useCommerceAppContext)().emitMessage,S=(0,h.useTrackEvent)();(0,r.useEffect)((function(){var e=(0,u.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.MODAL),"".concat(m.ps.COMPLETE_PURCHASE_WEB));S(e)}),[S,t]);var b=function(e){switch(e){case f.q.CHANGE_PLAN:return{header:n.get(d.headerChangePlan),message:n.get(d.messageChangePlan),cancelButton:n.get(d.cancelButtonChangePlan),continueButton:n.get(d.continueButtonChangePlan)};default:return{header:n.get(d.headerDefault),message:n.get(d.messageDefault),cancelButton:n.get(d.cancelButtonDefault),continueButton:n.get(d.continueButtonDefault)}}}(t),T=b.header,P=b.message,I=b.cancelButton,A=b.continueButton,O=(0,g.useStore)(),k=(0,l.jz)(O.getState());return y("div",{className:i.Z.container},!k&&y("div",{className:i.Z.closeContainer},y(o.default,{variant:"action",quiet:!0,onClick:function(){C(v.SystemMessage.CLOSE)},icon:y(a.default,{size:"L"}),"data-testid":"closeButton"})),y("div",{className:i.Z.center},y(p.InfoLight,{size:"L","data-testid":"externalWorkflowIcon"}),y(c.X6,null,T),y("p",{className:i.Z.message},P),y("div",{className:i.Z.buttonContainer},y(o.default,{variant:"secondary","data-testid":"externalWorkflowCancelButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.CANCEL),"".concat(m.ps.COMPLETE_PURCHASE_WEB).concat(m.ps.CANCEL));S(e),C(v.SystemMessage.CLOSE)}},I),y(o.default,{variant:"cta","data-testid":"externalWorkflowContinueButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.GET_STARTED),"".concat(m.ps.COMPLETE_PURCHASE_WEB).concat(m.ps.GET_STARTED));S(e),C(v.SystemMessage.CLOSE,{shouldTriggerLicenseCheck:!0,status:E.WorkflowStatus.ORDER_COMPLETE})}},A))))})),b=n(26075),T=n(45800),P=n(27261),I=n(76410);function A(){var e=(0,P.Z)(["\n  query UserSubscriptionChangePlanQuery($offerId: ID!, $subscriptionId: ID!) {\n    user {\n      id\n      userSubscription(subscriptionId: $subscriptionId) {\n        id\n        changePlanAllowed(offerId: $offerId)\n      }\n    }\n  }\n"]);return A=function(){return e},e}function O(){var e=(0,P.Z)(["\n  fragment IneligiblePurchaseOrderFragment on Order {\n    marketSegment\n    country\n    cart {\n      cartItems {\n        offerId\n        conflicts {\n          offerId\n          reasonCode\n          subscriptionId\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}function k(){var e=(0,P.Z)(["\n  query getOfferForIneligiblePurchaseQuery($offerId: ID!, $country: String!) {\n    offer(id: $offerId, country: $country) {\n      ...IneligiblePurchaseOfferFragment\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function _(){var e=(0,P.Z)(["\n  fragment IneligiblePurchaseOfferFragment on Offer {\n    id\n    commitment\n    term\n    productArrangement {\n      cloud\n      family\n    }\n    offerContent {\n      productName\n      productIconUrls\n    }\n  }\n"]);return _=function(){return e},e}var N=(0,I.Ps)(_()),x=(0,I.Ps)(k(),N),U=(0,I.Ps)(O()),L=(0,I.Ps)(A()),D=function(e,t,n){return e.query({query:x,variables:{offerId:t,country:n}}).then((function(e){return e.data.offer}))},R=n(62482),w=n(36623),B=n(26265),M=n(809),Z=n.n(M),H=n(92447),j=n(38347),F=n(91229),W=n(85564),G=n.n(W),q=n(37244),V=n.n(q),$=n(7585),K=n(61792),Y=n(73728),z=n(61274),Q=n(62452),X=n(85475),J=r.createElement,ee=function(e){return J($.a,null,(function(t){return J(te,(0,F.Z)({client:t},e))}))},te=function(e){var t,n=e.client,o=e.openUrl,a=e.onFooterClicked,i=(0,j.Z)(e,["client","openUrl","onFooterClicked"]),u=(0,X.w)(),c=(0,r.useContext)(g.StoreContext),s=(0,g.useStore)(),d=c.getState(),f=(0,l.n$)(d),p=(0,g.useSelector)(w.NO),m=(0,K.hP)(d),v=(0,K.et)(d),h=null===v||void 0===v?void 0:v.userId,C=(0,z.d0)(),E=(0,Q.tD)(),y=E.redirect,S=E.cancelUrl,b=null!==o&&void 0!==o?o:y,P=(0,Q.Sd)(),I=n.readFragment({fragment:U,id:"Order:".concat(p),fragmentName:"IneligiblePurchaseOrderFragment"}),A=(0,r.useCallback)(function(){var e=(0,H.Z)(Z().mark((function e(t,r){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),O=(0,r.useCallback)((function(e,t){return function(e,t,n,r){return e.query({query:L,variables:{offerId:t,subscriptionId:n},context:r,fetchPolicy:"network-only"}).then((function(e){var t=(e.data.user||{}).userSubscription;return null===t||void 0===t?void 0:t.changePlanAllowed})).catch((function(){return!1}))}(n,e,t,m?{headers:{authorization:m}}:{})}),[n,m]),k=(0,r.useCallback)(function(){var e=(0,H.Z)(Z().mark((function e(t){var r,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.FG)(n,t,h,f);case 2:return r=e.sent,o=r.data,e.abrupt("return",{data:o});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,f,h]),_=(0,r.useCallback)(function(){var e=(0,H.Z)(Z().mark((function e(t){var n,r,o,a,i,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.info("Checking whether user is eligible for I2T upgrade in case of duplicate purchase"),e.next=3,k(t);case 3:if(i=e.sent,l=i.data,!((null===l||void 0===l||null===(n=l.individualToTeamUpgradeOffers)||void 0===n||null===(r=n.activeOffersResult)||void 0===r?void 0:r.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.includes("ACTIVE_SUBSCRIPTION_I2T_UPGRADEABLE")}))).length>0&&(null===l||void 0===l||null===(o=l.individualToTeamUpgradeOffers)||void 0===o||null===(a=o.upgradeOffersResult)||void 0===a?void 0:a.offers.length)>0)){e.next=9;break}return u.info("Eligible for i2t upgrade as part of duplicate purchase from A.com"),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,u]),N=function(e,t,n){var r,o=null===e||void 0===e||null===(r=e.productArrangement)||void 0===r?void 0:r.family,a=n.find((function(e){return(null===e||void 0===e?void 0:e.paFamily)===o}));return t.includes(null===a||void 0===a?void 0:a.id)},x=(0,r.useCallback)(function(){var e=(0,H.Z)(Z().mark((function e(t){var n,r,o,a,i,l,c,s,d,p,m,v,g,h,C,E,y;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:d=e.sent,p=d.data,m=null===p||void 0===p||null===(n=p.individualToTeamUpgradeOffers)||void 0===n?void 0:n.activeSubscriptions,v=null===p||void 0===p||null===(r=p.individualToTeamUpgradeOffers)||void 0===r||null===(o=r.activeOffersResult)||void 0===o?void 0:o.map((function(e){return{id:null===e||void 0===e?void 0:e.offer.id,paFamily:null===e||void 0===e?void 0:e.offer.productArrangement.family}})),g=null===p||void 0===p||null===(a=p.individualToTeamUpgradeOffers)||void 0===a||null===(i=a.upgradeOffersResult)||void 0===i?void 0:i.offers,h=null===I||void 0===I||null===(l=I.cart)||void 0===l||null===(c=l.cartItems)||void 0===c?void 0:c.map((function(e){var t;return null===e||void 0===e||null===(t=e.conflicts)||void 0===t?void 0:t.map((function(e){return e.offerId}))})),C=G()(h),E=null===g||void 0===g?void 0:g.map((function(e,t){var n=e.offer;if(t<m.length)return{id:n.id,q:N(n,C,v)?2:1}})).filter((function(e){return void 0!==e})),s={},(0,B.Z)(s,V().app.COUNTRY.name,t),(0,B.Z)(s,V().app.LANGUAGE.name,f),(0,B.Z)(s,V().app.CURRENT_SUBSCRIPTION_IDS.name,m),(0,B.Z)(s,V().app.ITEMS.name,E),y=s,u.info("Redirecting to i2t payment page as part of duplicate purchase from A.com"),P(y);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,P,f,I,u]),R=Y.j$.IN_WEB,M=null===(t=s.getPersonalizedContentVariationByAEMQueryName)||void 0===t?void 0:t.call(s,"ineligible-purchase-dialogs-list"),W=M?Object.fromEntries(M.split(";").map((function(e){return e.split("=")}))):void 0;return J(Y.jO,(0,F.Z)({fetchOffer:A,fetchUserSubscriptionChangeOfferAllowed:O,fetchIndividualToTeamUpgradeAllowed:_,upgradeIndividualToTeam:x,locale:"zh-hant"===f?"zh_TW":f,switchPlanSurface:R,order:I,openUrl:b,onFooterClicked:a,cancelUrl:S,promoCode:null===C||void 0===C?void 0:C[0],variation:W},i))},ne=n(56),re=n(37703),oe=r.createElement;function ae(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t=e.children,n=(0,b.x)(),o=(0,ne.TZ)(),a=(0,v.useCommerceAppContext)().isInApp,i=(0,Q.nV)(),u=(0,r.useState)(!1),l=u[0],c=u[1],s=(0,r.useState)(void 0),d=s[0],p=s[1],m=(0,re.useSelector)(w.NO),g=(0,r.useCallback)((function(){var e,t,r=n.readFragment({fragment:U,id:"Order:".concat(m),fragmentName:"IneligiblePurchaseOrderFragment"}),o=ae(null===r||void 0===r||null===(e=r.cart)||void 0===e?void 0:e.cartItems);try{for(o.s();!(t=o.n()).done;){var a,i=ae(t.value.conflicts);try{for(i.s();!(a=i.n()).done;){var u=a.value;if(u.reasonCode)return u.reasonCode}}catch(l){i.e(l)}finally{i.f()}}}catch(l){o.e(l)}finally{o.f()}}),[m,n]);function h(e){switch(e){case T.rg.IneligibleSwitch:case T.rg.IneligibleIncluded:case T.rg.IneligibleDuplicateUpgrade:p(f.q.CHANGE_PLAN);break;default:p(void 0)}}return oe(r.Fragment,null,oe(ee,{openUrl:a()?function(e){h(g()),c(!0);var t=(0,R.AK)(e);i(t)}:void 0,onFooterClicked:a()?function(){h(void 0),c(!0)}:void 0,adobeLaunchAnalytics:o}),l?oe(S,{workflow:d}):t)}},93714:function(e,t,n){"use strict";n.d(t,{Z:function(){return x},h:function(){return L}});var r=n(67294),o=n(37244),a=n.n(o),i=n(26075),u=n(54147),l=n(99615),c=n(37629),s=n(99246),d=n(96029),f=n(47758),p=n(40705),m=n(61792),v=n(18983),g=n(6119),h=n(75509),C=n(56),E=n(25235),y=n(30488),S=n(34937),b=n(43773),T=n(23424),P=n(37703),I=n(12510),A=n(10315),O=n(73113),k=r.createElement,_=function(e){return function(t){var n=(0,I.useStore)(),r=(0,b.T)(),o=(0,P.useSelector)(m.Ax),v=null===o||void 0===o?void 0:o.browser,h=(0,u.VB)(u.yr),A=(0,C.TZ)(),_=(0,y.useCommerceAppContext)().hostCtxId,N=(0,i.x)(),x=(0,P.useSelector)(d.By)===a().app.LAYOUT.values.SLIM,U=(0,S.useContentEntry)(void 0,!0).get("productInfoBoxContentList"),L=(0,E.T)(),D=(0,T.g)([s.R.UC_FORCE_ALL_APPS_OPTIMIZATION]);(0,p.jO)(n.getState(),null===L||void 0===L?void 0:L.offer,D)&&U&&(U.items[0].learnMoreLabel=U.items[0].newLearnMoreLabel),x&&U&&(U.items[0].learnMoreLabel="");var R=(0,O.withDialog)((function(e){var r=e.onClose,o=t.data,a=o.offerContent,i=o.productArrangementCode,u=o.productIconUrls;return k(g.l,{onClose:r,offerContent:a,productArrangementCode:i,productLogoUrls:u,commerceAppContext:_,errorBoundaryComponentName:"ProductInfoBox",store:n,apolloClient:N,adobeLaunchAnalytics:A,features:(0,f.h)()})}),{onClick:function(e){var t,n="product-info-learn-more"===(null===e||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.testid);return v===l.s.SAFARI&&h&&window.scroll(0,0),n&&r(c.P.LEARN_MORE_CLICK),n}})((function(n){var r=n.onClick,o=function(e){null===r||void 0===r||r(e.target)};return k("div",{role:"button",onKeyDown:function(e){13!==e.keyCode&&"Enter"!==e.key||(e.preventDefault(),o(e))},onClick:o},k(e,t))}));return k(R,null)}},N=_(h.Z9),x=(0,A.n)("productInfoCard",h.G6)(N),U=_(h.h8),L=(0,A.n)("productInfoBoxContent",h.qW)(U),D=(0,A.n)("languageWordOrder",v.LanguageWordOrderModel)((function(){return null})).queryCollection;x.queryCollection.merge(D)},46839:function(e,t,n){"use strict";n.d(t,{l:function(){return c}});var r=n(67294),o=n(83004),a=n(36020),i=n(49313),u=n(85160),l=r.createElement,c=function(e){var t=e.title,n=e.subtitle,r=e.contextualHelpHeader,c=e.contextualHelpBody;return l("div",{className:o.Z.stepHeader},l("div",{className:o.Z.stepHeaderTitle,"data-testid":"step-header-title","data-cs-mask":!0},t),n&&l("div",{className:o.Z.stepHeaderSubtitle,"data-testid":"step-header-subtitle"},n,r&&c&&l(a.k,{variant:"info","data-testid":"subtitle-contextual-help"},l(i.X6,{"data-testid":"subtitle-contextual-header"},r),l(u.Content,{"data-testid":"subtitle-contextual-body"},l(i.xv,null,c)))))}},99615:function(e,t,n){"use strict";var r;n.d(t,{s:function(){return r}}),function(e){e.SAFARI="Safari"}(r||(r={}))},22246:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(37244),o=n.n(r),a=n(45800);function i(e,t,n){var r,i=(null!==t&&void 0!==t?t:{}).appliedPromotions;if((null===i||void 0===i||null===(r=i[0])||void 0===r?void 0:r.status)===a.E_.Valid){var u=i[0].promotionCode;e[o().app.APPLIED_PROMOTION_CODE.name]=u,null===n||void 0===n||n(u,{force:!0})}}},17327:function(e,t,n){"use strict";n.d(t,{G:function(){return ye}});var r=n(26265),o=n(37244),a=n.n(o),i=n(67294),u=n(79978),l=n(14834),c=n(56746),s=n(23996),d=n(34937),f=n(2385),p=n(90325),m=n(37629),v=n(52253),g=n(41681),h=n(99246),C=n(298),E=n(22965),y=n(11426),S=n(62482),b=n(65455),T=n(94945),P=n(96029),I=n(61792),A=n(30137),O=n(8703),k=n(80827),_=n(96671),N=n(84248),x=n(93714),U=n(76217),L=n(52251),D=(0,d.defineContents)("SegmentationBackgroundImage",{imageUrl:{id:"imageUrl",type:L.wQ},family:{id:"family",type:"string"}}),R=(0,d.defineContents)("SegmentationHeader",{header:{id:"header",type:"string"},offerType:{id:"offerType",type:"string"},customerSegment:{id:"customerSegment",type:"string"},marketSegment:{id:"marketSegment",type:"string"},trialTermUnit:{id:"trialTermUnit",type:"string"},trialTerm:{id:"trialTerm",type:"string"}}),w=(0,d.defineContents)("SegmentationPageContent",{pageTitle:{id:"pageTitle",type:R,isArray:!0,placeholderContent:[{header:"Let's get started - Your first day is free.",offerType:"TRIAL",trialTermUnit:"DAY",trialTerm:"1"},{header:"Let's get started - Your first {trialTermUnit} days are free.",offerType:"TRIAL",trialTermUnit:"DAY"},{header:"Let's get you {productName}.",offerType:"BASE"}]},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},segmentationBackgroundImages:{id:"segmentationBackgroundImages",type:D,isArray:!0,placeholderContent:[{family:"DEFAULT",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/segmentation_right_side_background.png",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/segmentation_right_side_background.png"}},{family:"PHOTOSHOP",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photoshop.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photoshop.jpg"}},{family:"PHOTOSHOP_LIGHTROOM",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photography.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photography.jpg"}},{family:"ILLUSTRATOR",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Illustrator.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Illustrator.jpg"}},{family:"CC_ALL_APPS",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/CC_All_Apps.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/CC_All_Apps.jpg"}}]}}),B=n(10315),M=(0,B.n)("segmentationSelectors",L.MP)(L.DV),Z=n(22246),H=n(36623),j=n(15257),F=n(46839),W=n(19756),G=n(93552),q=(n(45697),n(73935)),V=!1,$=i.createContext(null),K="unmounted",Y="exited",z="entering",Q="entered",X="exiting",J=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o=Y,r.appearStatus=z):o=Q:o=t.unmountOnExit||t.mountOnEnter?K:Y,r.state={status:o},r.nextCallback=null,r}(0,G.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===K?{status:Y}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==z&&n!==Q&&(t=z):n!==z&&n!==Q||(t=X)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===z?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Y&&this.setState({status:K})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[q.findDOMNode(this),r],a=o[0],i=o[1],u=this.getTimeouts(),l=r?u.appear:u.enter;!e&&!n||V?this.safeSetState({status:Q},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,i),this.safeSetState({status:z},(function(){t.props.onEntering(a,i),t.onTransitionEnd(l,(function(){t.safeSetState({status:Q},(function(){t.props.onEntered(a,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:q.findDOMNode(this);t&&!V?(this.props.onExit(r),this.safeSetState({status:X},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Y},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Y},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:q.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],i=o[1];this.props.addEndListener(a,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===K)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,W.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement($.Provider,{value:null},"function"===typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},t}(i.Component);function ee(){}J.contextType=$,J.propTypes={},J.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ee,onEntering:ee,onEntered:ee,onExit:ee,onExiting:ee,onExited:ee},J.UNMOUNTED=K,J.EXITED=Y,J.ENTERING=z,J.ENTERED=Q,J.EXITING=X;var te=J,ne=n(30488),re=n(37703),oe=n(43773),ae=n(23424),ie=n(61274),ue=n(62452),le=n(54147),ce=n(93633),se=n(55988),de=n(96909),fe=n(5764),pe=n(12510),me=n(52007),ve=n(21346),ge=n(60718),he=i.createElement;function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=(0,B.n)("segmentationPage",w)((function(){var e,t,n=(0,ue.eR)(k.N$.SWITCH),r=(0,se.t)().currentRoute,o=(0,me.useTrackEvent)(),L=(0,re.useSelector)(b.dm),B=L.teamAdminConsoleUrl,W=L.teamCCPlansUrl,G=L.teamCCEduPlansUrl,q=L.teamDocumentPlansUrl,V=(0,re.useSelector)(I.H0),$=(0,d.useContentEntry)(w),K=(0,le.VB)(),Y=(0,i.useState)(""),z=Y[0],Q=Y[1],X=(0,fe.R_)(),J=X.goToNextStep,ee=X.hasPreviousStep,Ce=(0,pe.useStore)().getState(),ye=(0,re.useSelector)(b.mT),Se=(0,re.useSelector)(b.n$),be=a().app,Te=be.PA_CODE,Pe=be.MARKET_SEGMENT,Ie=be.OFFER_TYPE,Ae=be.ORIGINAL_OFFER_ID,Oe=be.CLIENT_ID,ke=be.SVAR,_e=(0,ne.useCommerceAppContext)().isInApp,Ne=(0,ue.nV)(),xe=(0,ue.nV)(g.ki.BUSINESS_TRIAL),Ue=(0,i.useState)(!1),Le=Ue[0],De=Ue[1],Re=(0,re.useSelector)(P.vl),we=Re[Te.name],Be=Re[Pe.name],Me=Re[Ie.name],Ze=Re[Oe.name],He=Re[ke.name],je=(0,re.useSelector)(I.et).userId,Fe=(0,re.useSelector)(y.tT),We=(0,y.Nk)().clearBundleSourceOffer,Ge=(0,re.useDispatch)(),qe=(0,de.W)(),Ve=qe.showApplePay,$e=qe.showGooglePay,Ke=(0,i.useState)((0,ie.d0)())[0],Ye=(0,ie.Af)(),ze=(0,ve.z)(),Qe=(0,ae.g)([h.R.P_UC_USE_TEST_CAMPAIGNS])[h.R.P_UC_USE_TEST_CAMPAIGNS],Xe=(0,ce.a)(E.j_,{variables:(0,E.WC)(ye,we,Se,Me,je,Ze,He,Ke,Qe)}).data.segmentationOffers,Je=(null===Xe||void 0===Xe||null===(e=Xe.result)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.offers)||[],et=(0,p.V$)(Re,Je),tt=(0,i.useState)(et),nt=tt[0],rt=tt[1],ot=(0,i.useRef)({isDefaultSegmentSelected:!0});(0,i.useEffect)((function(){Fe&&We()}),[We,Fe]);var at=(0,oe.T)();(0,i.useEffect)((function(){if(nt){if(ot.current.isDefaultSegmentSelected){at(m.P.PAGE_LOAD,{offers:Je,selectedOfferId:nt});var e=(0,j.SQ)(Je,nt,!0),t=e.offer,n=e.selectedPodEvent,o=e.flowTypeAttributes,a=(0,C.Nf)(t,o,Ce,v.RC.EVENT_STATE_TYPE,n,r,Ve,$e);ze(a)}else{at(m.P.SEGMENT_SELECTED,{offers:Je,selectedOfferId:nt});var i=(0,j.SQ)(Je,nt,!1),u=i.offer,l=i.selectedPodEvent,c=i.flowTypeAttributes,s=(0,C.Nf)(u,c,Ce,v.RC.EVENT_LINK_TYPE,l,r);ze(s)}ot.current.isDefaultSegmentSelected=!1}}),[nt]);function it(){return Je.find((function(e){return(null===e||void 0===e?void 0:e.offer.id)===nt}))}var ut=function(e,t){var n;return null===(n=Je.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};var lt=function(e,t){return function(e,t){return t===f.op.Individual&&e.includes(f.ii.Com)}(e,t)?"":z};var ct=function(e){if(!e)return null;var t,n,r=e.offerType===f.m_.Promotion,o=!!e.appliedPromotions;return r?e.marketSegments.includes(f.ii.Edu)?null===(t=e.marketSegmentAltPrice)||void 0===t||null===(n=t.offerPriceDisplay)||void 0===n?void 0:n.displayUnitPrice:e.offerPriceDisplay.displayBaseUnitPrice:o?e.offerPriceDisplay.displayBaseUnitPrice:void 0},st=function(e){return $.search(D).find((function(t){return t.get(D.family)===String(e).toUpperCase()}))};return he(i.Fragment,null,Le?he(A.b,{workflow:V?O.q.TEAM_ADMIN:O.q.BUSINESS_TRIAL}):he(ge.Ru,null,he(ge.uN,null,he(F.l,{title:function(){var e,t,n=null===(e=it())||void 0===e?void 0:e.offer,r=n||{},o=r.offerType,a=r.promotion,i=(0,T.p)($.get(w.pageTitle),o,a);return R.createEntry(i).format(R.header,{trialTermUnit:null===a||void 0===a?void 0:a.promotionTermValue,productName:null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName})}()}),he("div",{className:u.Z.segmentationContainer},he(M,{defaultSelectionOfferId:nt,code:we,marketSegment:Be,segmentations:Je,onSelect:function(e){return function(e){var t=null===e||void 0===e?void 0:e.id;rt(t),Ge((0,H.$C)(t)),Q(null===e||void 0===e?void 0:e.title)}(e)}})),he(l.s,{ctaLabel:$.get(w.buttonContinue),onCtaClick:function(){var e,t,r=(0,C.W6)("".concat(v.Fp.PAGE_SEGMENTATION,":").concat(v.ps.CONTINUE,":").concat(v.ps.CLICK),v.ps.CONTINUE);o(r);var a=null!==(e=null===(t=it())||void 0===t?void 0:t.offer)&&void 0!==e?e:{},i=a.customerSegment,u=a.offerType,l=a.appliedPromotions;if(i===f.op.Team)!function(e){if(V)_e()?(De(!0),Ne((0,S.AK)(B))):n(B);else if(e===N.R.TRIAL){var t,r,o,a=null===(t=Je.find((function(e){return e.offer.id===et})))||void 0===t||null===(r=t.offer)||void 0===r||null===(o=r.productArrangement)||void 0===o?void 0:o.family,i=(0,S.dy)(nt,ye,Se,a);_e()?(De(!0),xe(i)):n(i)}else{var u,l,c,d,p=(null===(u=it())||void 0===u?void 0:u.offer)||{};c=(null===p||void 0===p||null===(l=p.productArrangement)||void 0===l?void 0:l.cloud)===s.e.DOCUMENT?q:null!==p&&void 0!==p&&null!==(d=p.marketSegments)&&void 0!==d&&d.includes(f.ii.Com)?W:G,_e()?(De(!0),Ne((0,S.AK)(c))):n(c)}}(u);else{var c,d=[{id:nt}],p=Ee(Ee({},Re),{},{items:d});if((0,Z.m)(p,{appliedPromotions:l},Ye),function(){var e,t=ut(f.op.Individual,f.ii.Com),n=ut(f.op.Individual,f.ii.Edu),r=null===(e=it())||void 0===e?void 0:e.offer;return t&&n&&t.productArrangement.family!==n.productArrangement.family&&(null===r||void 0===r?void 0:r.marketSegments.includes(f.ii.Edu))}())p[Ae.name]=null===(c=ut(f.op.Individual,f.ii.Com))||void 0===c?void 0:c.id;J(p)}},showBackButton:ee()})),function(){var e,t=function(){var e,t,n,r=null===(e=it())||void 0===e?void 0:e.offer,o=r||{},a=o.offerContent,i=o.marketSegments,u=o.customerSegment,l=o.offerPriceDisplay,c=o.productArrangementCode,s=o.term,d=o.offerType,m=o.promotion,v=o.currency,g=o.productArrangement,h=o.processingInstructions,C=a||{},E=C.productName,y=C.productDescription,S=C.productIconUrls,b=ut(f.op.Individual,f.ii.Com),T=(null===b||void 0===b||null===(t=b.offerContent)||void 0===t?void 0:t.productName)||"",P=(null===b||void 0===b?void 0:b.productArrangementCode)||c,I=(0,p.QK)(l.priceDisplay),A={recurrenceTerm:_.g.Yearly===s?U.RecurrenceTerm.YEAR:U.RecurrenceTerm.MONTH,formatString:null===v||void 0===v?void 0:v.formatString,isTaxInclusive:I,taxTerm:(0,p.Mo)(null===r||void 0===r?void 0:r.offerPriceDisplay)},O={usePrecision:null===v||void 0===v?void 0:v.precision};null!==l&&void 0!==l&&l.displayUnitPrice&&(n={data:Ee({price:l.displayUnitPrice},A),options:O});var k={offerType:d,customerSegment:u,marketSegments:i,promotion:m,processingInstructions:h},N=ct(r);return Ee(Ee({productArrangementCode:c,productName:E,productDescription:y,subtitle:lt(i,u),productIconUrls:S,offerContent:a,offerType:d,promotion:m,startingPrice:n},N?{strikethroughPrice:{data:Ee({price:N},A),options:O}}:{}),{},{productArrangement:g,clarityTermsProps:k,includedProductName:T,includedProductArrangementCode:P})}(),n=null===t||void 0===t||null===(e=t.productArrangement)||void 0===e?void 0:e.family,r=nt?function(e){var t,n,r,o=st(e);return o?null===o||void 0===o||null===(t=o.get(D.imageUrl))||void 0===t?void 0:t._publishUrl:null===(n=st("DEFAULT"))||void 0===n||null===(r=n.get(D.imageUrl))||void 0===r?void 0:r._publishUrl}(n):"",o=K?"Y":"X",a={entering:{opacity:0,transform:"translate".concat(o,"(").concat("30%",")")},entered:{opacity:1,transform:"translate".concat(o,"(0)")}};return he(te,{appear:!0,in:!0,timeout:600},(function(e){return he(c.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"WizardLayoutDetailsPanel"}},he(ge.Wh,{className:u.Z.segmentationDetailsPanel,style:Ee({opacity:0,transform:"translate".concat(o,"(").concat("30%",")"),transition:"all ".concat(600,"ms ease-in-out")},a[e])},he("div",{className:u.Z.backgroundImageContainer,role:"img","data-testid":"productImage",style:{backgroundImage:"url(".concat(r||"",")")}}),he("div",{className:u.Z.productCardContainer},nt&&he(x.Z,{data:t}))))}))}()))})),Se=ye.queryCollection;Se.merge(ge.Ru.queryCollection),Se.merge(x.Z.queryCollection),Se.merge(M.queryCollection)},84054:function(e,t,n){"use strict";n.d(t,{vI:function(){return r.G},VQ:function(){return o.VQ},j_:function(){return o.j_},tH:function(){return o.tH},WC:function(){return o.WC}});var r=n(17327),o=n(22965)}}]);